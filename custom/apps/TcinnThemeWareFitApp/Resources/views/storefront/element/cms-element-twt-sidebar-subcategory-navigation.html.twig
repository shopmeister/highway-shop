{# ThemeWareÂ® CMS element "Sidebar subcategory navigation" #}

{#
    Create cms element and include the sidebar navigation subcategories include (@Storefront/storefront/layout/sidebar/category-navigation.html.twig)
    Note: This is included via "@Storefront/storefront/block/cms-block-twt-sidebar-subcategory-navigation.html.twig"

    @Storefront/storefront/element/cms-element-twt-sidebar-subcategory-navigation.html.twig
#}

{# ThemeWare: Include shopware category navigation #}
<div class="cms-element-{{ element.type }} cms-element-category-navigation"> {# INFO: Class 'cms-element-category-navigation' temporary added for styling purposes. #}
    {% set twtNavigationResult = page.header.navigation.tree %}
    {% set twtActiveResult = page.header.navigation.active %}

    {% for item in twtNavigationResult  %}
        {% if (item.category.id in twtActiveResult.id) or (item.category.id in twtActiveResult.path) %}
            {% set twtNavigationResult = [item] %}
        {% endif %}
    {% endfor %}

    <div class="category-navigation-box">
        {% sw_include '@Storefront/storefront/layout/sidebar/category-navigation.html.twig' with {
            navigationTree: twtNavigationResult,
            activeResult: twtActiveResult
        } only %}
    </div>
</div>