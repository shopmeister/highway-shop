{% sw_extends '@Storefront/storefront/component/product/description.html.twig' %}
{# ThemeWare® HC-Architecture® via configuration #}

{# ThemeWare: Description component on CMS product page #}

{# ---------------- START: SET TEMPLATE VARS ---------------- #}

{# ThemeWare: Set theme variables #}
{% set twtProductDetailCommentShow = theme_config('twt-product-detail-comment-show') %}
{% set twtProductDetailDatasheetsShow = theme_config('twt-product-detail-datasheets-show') %}
{% set twtProductDetailDescriptionTitleShow = theme_config('twt-product-detail-description-title-show') %}
{% set twtProductDetailDownloadsShow = theme_config('twt-product-detail-downloads-show') %}
{% set twtProductDetailFurtherLinksShow = theme_config('twt-product-detail-further-links-show') %}
{% set twtProductDetailProductVideosPosition = theme_config('twt-product-detail-product-videos-position') %}
{% set twtProductDetailProductVideosShow = theme_config('twt-product-detail-product-videos-show') %}
{% set twtProductDetailPropertiesHeadlineShow = theme_config('twt-product-detail-properties-headline-show') %}
{% set twtProductDetailPropertiesInfoShow = theme_config('twt-product-detail-properties-info-show') %}
{% set twtProductDetailPropertiesPosition = theme_config('twt-product-detail-properties-position') %}
{% set twtProductDetailTabDatasheetsShow = theme_config('twt-product-detail-tab-datasheets-show') %}
{% set twtProductDetailTabProductVideosShow = theme_config('twt-product-detail-tab-product-videos-show') %}

{# ---------------- END: SET TEMPLATE VARS ---------------- #}

{# ThemeWare: Adjustments in the description tab #}
{# HC-Architecture @Doku #}
{% block component_product_description_title %}
    {# ThemeWare: Adjustments to the product-detail-description-title #}
    {% if twtProductDetailDescriptionTitleShow == 1 %}
        {# ThemeWare: Block cleared #}

    {% elseif twtProductDetailDescriptionTitleShow == 3 %}
        {# ThemeWare: Show product name only #}
        <h2 class="product-detail-description-title">
            {{ product.translated.name }}
        </h2>

    {% elseif twtProductDetailDescriptionTitleShow == 4 %}
        {# ThemeWare: Show descriptionTitle only #}
        <h2 class="product-detail-description-title">
            {{ 'detail.descriptionTitle'|trans|sw_sanitize }}
        </h2>

    {% else %}
        {# Default block #}
        {{ parent() }}

    {% endif %}
{% endblock %}


{# ThemeWare: Adjustment of the description content #}
{% block component_product_description_content %}
    {# Default block #}
    {{ parent() }}

    {# ThemeWare: Include 'Videos' below properties (only if the videos tab is not displayed) #}
    {% if twtProductDetailProductVideosShow == 2 and twtProductDetailTabProductVideosShow == 1 and twtProductDetailProductVideosPosition == 2 %}
        {% sw_include '@Storefront/storefront/themeware/product-detail/includes/twt-product-videos.html.twig' ignore missing with {
            position: 'description',
            type: 'component'
        } %}
    {% endif %}

    {# ThemeWare: Include 'Datasheets' #}
    {% if twtProductDetailDatasheetsShow == 2 and twtProductDetailTabDatasheetsShow == 1 %}
        {% sw_include '@Storefront/storefront/themeware/product-detail/includes/twt-product-datasheets.html.twig' ignore missing with {
            position: 'description',
            product: product
        } %}
    {% endif %}

    {# ThemeWare: Add 'Further links' (description only) #}
    {% if twtProductDetailFurtherLinksShow == 2 %}
        {% sw_include '@Storefront/storefront/themeware/product-detail/description/twt-product-further-links.html.twig' ignore missing with {
            product: product
        } %}
    {% endif %}

    {# ThemeWare: Include 'Downloads' (description only) #}
    {% if twtProductDetailDownloadsShow == 2 %}
        {% sw_include '@Storefront/storefront/themeware/product-detail/description/twt-product-downloads.html.twig' ignore missing with {
            product: product
        } %}
    {% endif %}

    {# ThemeWare: Include 'Comment' (description only) #}
    {% if twtProductDetailCommentShow == 2 %}
        {% sw_include '@Storefront/storefront/themeware/product-detail/description/twt-product-comment.html.twig' ignore missing with {
            product: product
        } %}
    {% endif %}
{% endblock %}


{# ThemeWare: Adjustment of the properties in description tab #}
{# HC-Architecture @Doku #}
{% block component_product_description_content_properties %}
    {# ThemeWare: Include 'Videos' above properties (only if the videos tab is not displayed) #}
    {% if twtProductDetailProductVideosShow == 2 and twtProductDetailTabProductVideosShow == 1 and twtProductDetailProductVideosPosition == 1 %}
        {% sw_include '@Storefront/storefront/themeware/product-detail/includes/twt-product-videos.html.twig' ignore missing with {
            position: 'description',
            type: 'component'
        } %}
    {% endif %}

    {# ThemeWare: Add properties headline #}
    {% if twtProductDetailPropertiesPosition != 2 and twtProductDetailPropertiesHeadlineShow != 1 %}
        {% if product.sortedProperties|length > 0 %}
            {# block page_product_detail_properties_title @deprecated!! #}
            {% block page_product_detail_properties_subheadline %}
                <div class="h4 twt-product-properties-description-title twt-product-detail-description-subheadline">
                    {{ 'twt.detail.properties.title'|trans|sw_sanitize }}
                </div>
            {% endblock %}
        {% endif %}
    {% endif %}

    {# ThemeWare: Show properties in individuell tab if configured #}
    {% if twtProductDetailPropertiesPosition == 2 %}
        {# ThemeWare: Block cleared #}
    {% else %}
        {# Default block > load "@Storefront/storefront/component/product/properties.html.twig' #}
        {{ parent() }}
    {% endif %}

    {# ThemeWare: Add properties infotext #}
    {% if twtProductDetailPropertiesPosition != 2 and twtProductDetailPropertiesInfoShow != 1 %}
        {% if product.sortedProperties|length > 0 %}
            {% block page_product_detail_properties_info %}
                <div class="twt-product-detail-properties-info">
                    {{ 'twt.detail.infoProperties'|trans|sw_sanitize }}
                </div>
            {% endblock %}
        {% endif %}
    {% endif %}
{% endblock %}