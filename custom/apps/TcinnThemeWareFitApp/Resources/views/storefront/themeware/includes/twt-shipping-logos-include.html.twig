{# ThemeWare® 'Shipping logos' content #}
{#
	@Storefront/storefront/themeware/includes/twt-shipping-logos-include.html.twig
#}

{# @TODO: Blöcke prüfen... #}

{# ---------------- START: SET TEMPLATE VARS ---------------- #}

{# ThemeWare: Set theme variables #}
{% set twtWidgetShippingLogoLink = theme_config('twt-widget-shipping-logo-link') %}
{% set twtCustomShippingImage1 = theme_config('twt-widget-shipping-logo-custom-image-1') %}
{% set twtCustomShippingImage2 = theme_config('twt-widget-shipping-logo-custom-image-2') %}
{% set twtCustomShippingImage3 = theme_config('twt-widget-shipping-logo-custom-image-3') %}
{% set twtCustomShippingImagesOnly = theme_config('twt-widget-shipping-logo-custom-images-only') %}
{% set twtWidgetShippingLogoFallbackBadge = theme_config('twt-widget-shipping-logo-fallback-badge') %}

{% set twtWidgetShippingLogoMaxHeight = theme_config('twt-widget-shipping-logo-max-height') %}

{% if twtCustomShippingImagesOnly is empty %}
	{% set twtCustomShippingImagesOnly = 1 %}
{% endif %}

{# ---------------- END: SET TEMPLATE VARS ---------------- #}

{# ThemeWare: Add shipping logos #}
{% block twt_shipping_logos_content %}
	{% if twtCustomShippingImagesOnly == 1 %}
		{% for shippingMethod in page.salesChannelShippingMethods %}
			{% if shippingMethod.media %}
				{# Add logo #}
				<div class="{{ type }}-logo is-shipping-logo twt-order-{{ shippingMethod.position }}">
					{% if twtWidgetShippingLogoLink == 2 %}
						<a href="{{ 'twt.widget.shipping.link'|trans }}"
						   title="{{ shippingMethod.name }}"
						   {# @TODO tag:v6.7.0 - Check if aria-label is needed #}
						>
					{% endif %}

						{% if "twt" in shippingMethod.media.fileName %}
							{% sw_thumbnails 'footer-shipping-image-thumbnails' with {
								media: shippingMethod.media,
								sizes: {
									default: twtWidgetShippingLogoMaxHeight|number_format ~ 'px'
								},
								attributes: {
									class: 'footer-logo-image',
									alt: (shippingMethod.media.translated.alt ?: shippingMethod.translated.name),
									title: (shippingMethod.media.translated.title ?: shippingMethod.translated.name),
									height: twtWidgetShippingLogoMaxHeight|number_format ~ 'px',
									width: (twtWidgetShippingLogoMaxHeight|number_format * 1.96)|round(0, 'floor') ~ 'px',
									loading: 'lazy'
								}
							} %}

						{% else %}
							{% sw_thumbnails 'footer-shipping-image-thumbnails' with {
								media: shippingMethod.media,
								sizes: {
									default: twtWidgetShippingLogoMaxHeight|number_format ~ 'px'
								},
								attributes: {
									class: 'footer-logo-image',
									alt: (shippingMethod.media.translated.alt ?: shippingMethod.translated.name),
									title: (shippingMethod.media.translated.title ?: shippingMethod.translated.name),
									height: twtWidgetShippingLogoMaxHeight|number_format ~ 'px',
									loading: 'lazy'
								}
							} %}

						{% endif %}

					{% if twtWidgetShippingLogoLink == 2 %}
						</a>
					{% endif %}
				</div>

			{% else %}
				{# Add fallback badge #}
				{% if twtWidgetShippingLogoFallbackBadge == 2 %}
					<div  class="{{ type }}-logo is-shipping-logo is-fallback-badge twt-order-{{ shippingMethod.position }}">
						{% if twtWidgetShippingLogoLink == 2 %}
							<a href="{{ 'twt.widget.shipping.link'|trans }}"
							   title="{{ shippingMethod.name }}"
							>
								<span>{{ shippingMethod.name }}</span>
							</a>

						{% else %}
							<div title="{{ shippingMethod.name }}">
								<span>{{ shippingMethod.name }}</span>
							</div>

						{% endif %}
					</div>
				{% endif %}

			{% endif %}
		{% endfor %}
	{% endif %}
{% endblock %}

{# ThemeWare: Add custom shipping logos #}
{% block twt_shipping_logos_custom %}
	{# ThemeWare: Custom image 1 #}
	{% if twtCustomShippingImage1 %}
		<div class="{{ type }}-logo is-shipping-logo is-custom-logo">
			{% if twtWidgetShippingLogoLink == 2 %}
				<a href="{{ 'twt.widget.shipping.link'|trans }}"
				   title="{{ 'twt.widget.shipping.customImages.title1'|trans }}"
				   {# @TODO tag:v6.7.0 - Check if aria-label is needed #}
				>
			{% endif %}
                {# @TODO tag:v6.7.0 - Check if title is needed #}
				<img src="{{ twtCustomShippingImage1|sw_encode_url }}"
					 class="footer-logo-image"
					 alt="{{ 'twt.widget.shipping.customImages.title1'|trans }}"
					 title="{{ 'twt.widget.shipping.customImages.title1'|trans }}"
					 height="{{ twtWidgetShippingLogoMaxHeight|number_format }}px"
					 loading="lazy"
				>
			{% if twtWidgetShippingLogoLink == 2 %}
				</a>
			{% endif %}
		</div>
	{% endif %}

	{# ThemeWare: Custom image 2 #}
	{% if twtCustomShippingImage2 %}
		<div class="{{ type }}-logo is-shipping-logo is-custom-logo">
			{% if twtWidgetShippingLogoLink == 2 %}
				<a href="{{ 'twt.widget.shipping.link'|trans }}"
				   title="{{ 'twt.widget.shipping.customImages.title2'|trans }}"
				   {# @TODO tag:v6.7.0 - Check if aria-label is needed #}
				>
			{% endif %}
                {# @TODO tag:v6.7.0 - Check if title is needed #}
				<img src="{{ twtCustomShippingImage2|sw_encode_url }}"
					 class="footer-logo-image"
					 alt="{{ 'twt.widget.shipping.customImages.title2'|trans }}"
					 title="{{ 'twt.widget.shipping.customImages.title2'|trans }}"
					 height="{{ twtWidgetShippingLogoMaxHeight|number_format }}px"
					 loading="lazy"
				>
			{% if twtWidgetShippingLogoLink == 2 %}
				</a>
			{% endif %}
		</div>
	{% endif %}

	{# ThemeWare: Custom image 3 #}
	{% if twtCustomShippingImage3 %}
		<div class="{{ type }}-logo is-shipping-logo is-custom-logo">
			{% if twtWidgetShippingLogoLink == 2 %}
				<a href="{{ 'twt.widget.shipping.link'|trans }}"
				   title="{{ 'twt.widget.shipping.customImages.title3'|trans }}"
				   {# @TODO tag:v6.7.0 - Check if aria-label is needed #}
				>
			{% endif %}
                {# @TODO tag:v6.7.0 - Check if title is needed #}
				<img src="{{ twtCustomShippingImage3|sw_encode_url }}"
					 class="footer-logo-image"
					 alt="{{ 'twt.widget.shipping.customImages.title3'|trans }}"
					 title="{{ 'twt.widget.shipping.customImages.title3'|trans }}"
					 height="{{ twtWidgetShippingLogoMaxHeight|number_format }}px"
					 loading="lazy"
				>
			{% if twtWidgetShippingLogoLink == 2 %}
				</a>
			{% endif %}
		</div>
	{% endif %}
{% endblock %}