{% sw_extends '@Storefront/storefront/utilities/offcanvas.html.twig' %}

{# ThemeWare® "Manufacturer tab" on prodcut pages #}
{#
    Create container and add manufacturer information

    @Storefront/storefront/themeware/product-detail/twt-product-detail-tab-manufacturer.html.twig
#}

{# @TODO: Exclude content... #}

{# ---------------- START: SET TEMPLATE VARS ---------------- #}

{# ThemeWare: Set theme variables #}
{% set twtProductDetailTabManufacturerLinkProductsShow = theme_config('twt-product-detail-tab-manufacturer-link-products-show') %}
{% set twtProductDetailTabManufacturerLinkWebsiteShow = theme_config('twt-product-detail-tab-manufacturer-link-website-show') %}
{% set twtProductDetailTabManufacturerLogoShow = theme_config('twt-product-detail-tab-manufacturer-logo-show') %}
{% set twtProductDetailTabManufacturerRelatedLinksSubheadlineShow = theme_config('twt-product-detail-tab-manufacturer-related-links-subheadline-show') %}
{% set twtProductDetailTabManufacturerTitleShow = theme_config('twt-product-detail-tab-manufacturer-title-show') %}

{# ---------------- END: SET TEMPLATE VARS ---------------- #}

{# ThemeWare: Adjustments on offcanvas tab-content #}
{% block utilities_offcanvas_content %}

    {# ThemeWare: Show manufacturer information #}
    {% block twt_product_detail_tab_manufacturer %}
        {% block twt_product_detail_tab_manufacturer_container %}
            <div class="twt-product-detail-manufacturer tab-pane-container">
                <div class="row">

                    {# ThemeWare: Manufacturer content column #}
                    {% block twt_product_detail_tab_manufacturer_content %}
                        <div class="col twt-product-detail-manufacturer-content-container">

                            {# ThemeWare: Manufacturer headline #}
                            {% block twt_product_detail_tab_manufacturer_title %}
                                {% if twtProductDetailTabManufacturerTitleShow != 1 %}
                                    <div class="h3 twt-product-detail-manufacturer-tab-title product-detail-tab-headline">
                                        {% if twtProductDetailTabManufacturerTitleShow == 2 %}
                                            {# ThemeWare: Show snippet + manufacturer name #}
                                            {{ 'twt.detail.tabManufacturer.headline'|trans|sw_sanitize }} "{{ page.product.manufacturer.translated.name }}"

                                        {% elseif twtProductDetailTabManufacturerTitleShow == 3 %}
                                            {# ThemeWare: Show manufacturer name only #}
                                            {{ page.product.manufacturer.translated.name }}

                                        {% elseif twtProductDetailTabManufacturerTitleShow == 4 %}
                                            {# ThemeWare: Show snippet only #}
                                            {{ 'twt.detail.tabManufacturer.headline'|trans|sw_sanitize }}

                                        {% endif %}
                                    </div>
                                {% endif %}
                            {% endblock %}

                            {# ThemeWare: Manufacturer content #}
                            {% block twt_product_detail_tab_manufacturer_content_text %}
                                {# ThemeWare: Add manufacturer description #}
                                <div class="twt-product-detail-manufacturer-text">
                                    {{ page.product.manufacturer.translated.description|raw }}
                                </div>
                            {% endblock %}

                            {# ThemeWare: Manufacturer links #}
                            {% block twt_product_detail_tab_manufacturer_content_more_information %}

                                {# ThemeWare: Add manufacturer links headline #}
                                {% block twt_product_detail_tab_manufacturer_content_more_information_title %}
                                    {% if twtProductDetailTabManufacturerRelatedLinksSubheadlineShow == 2 %}
                                        <div class="h5 twt-product-manufacturer-more-information-title">
                                            {{ 'twt.detail.tabManufacturer.moreInformation'|trans }}
                                        </div>
                                    {% endif %}
                                {% endblock %}

                                {# ThemeWare: Manufacturer links list #}
                                {% block twt_product_detail_tab_manufacturer_content_more_information_links %}
                                    <ul class="twt-product-detail-manufacturer-more-information">

                                        {# ThemeWare: Add manufacturer link products #}
                                        {% block twt_product_detail_tab_manufacturer_content_more_information_link %}
                                            {% if twtProductDetailTabManufacturerLinkProductsShow == 2 %}
                                                <li class="twt-product-detail-manufacturer-more-information-item">
                                                    {% block twt_product_detail_tab_manufacturer_content_more_information_link_icon %}
                                                        {# @TODO tag:v6.7.0 - Check if aria-label or ariaHidden is needed #}
                                                        {% sw_icon 'arrow-large-right' style { pack:'solid', ariaHidden: true } %}
                                                    {% endblock %}
                                                    <a href="{{ path('frontend.search.page') }}?manufacturer={{ page.product.manufacturer.id }}&order=score&p=1&search={{ page.product.manufacturer.translated.name|replace({'<': '%3C', '>': '%3E', '\'': '%27', '"': '%22', '&': '%26', 'Ā': '%C4%80', ',': '%2C', '.': '.', '_': '_', '-': '-', ':': '%3A', ';': '%3B', '!': '%21', 'a': 'a', 'A': 'A', 'z': 'z', 'Z': 'Z', '0': '0', '9': '9', "\r": '%0D', "\n": '%0A', "\t": '%09', "\0": '%00', ' ': '%20', '~': '~', '+': '%2B'}) }}"
                                                       class="twt-product-detail-manufacturer-more-information-link"
                                                       title="{{ 'twt.detail.tabManufacturer.linkProducts.label'|trans({'%manufacturer%': page.product.manufacturer.translated.name }) }}"
                                                       rel="noopener"
                                                    >
                                                        {{ 'twt.detail.tabManufacturer.linkProducts.label'|trans({'%manufacturer%': page.product.manufacturer.translated.name }) }}
                                                    </a>
                                                </li>
                                            {% endif %}
                                        {% endblock %}

                                        {# ThemeWare: Manufacturer link website #}
                                        {% block twt_product_detail_tab_manufacturer_content_more_information_link_website %}
                                            {% if twtProductDetailTabManufacturerLinkWebsiteShow == 2 %}
                                                <li class="twt-product-detail-manufacturer-more-information-item">
                                                    {% block twt_product_detail_tab_manufacturer_content_more_information_link_website_icon %}
                                                        {# @TODO tag:v6.7.0 - Check if aria-label or ariaHidden is needed #}
                                                        {% sw_icon 'arrow-large-right' style { pack:'solid', ariaHidden: true } %}
                                                    {% endblock %}
                                                    <a href="{{ page.product.manufacturer.link }}"
                                                       class="twt-product-detail-manufacturer-more-information-link"
                                                       title="{{ page.product.manufacturer.translated.name }}"
                                                       target="_blank"
                                                       rel="noopener noreferrer"
                                                    >
                                                    {{ 'twt.detail.tabManufacturer.linkWebsite.label'|trans }}
                                                    </a>
                                                </li>
                                            {% endif %}
                                        {% endblock %}

                                    </ul>
                                {% endblock %}

                            {% endblock %}

                        </div>
                    {% endblock %}

                    {# ThemeWare: Manufacturer logo column #}
                    {% block twt_product_detail_tab_manufacturer_logo_container %}
                        {% if page.product.manufacturer.media|sw_encode_media_url and twtProductDetailTabManufacturerLogoShow == 2 %}
                            <div class="col-md-auto twt-product-detail-manufacturer-logo-container">
                                {# @depracted tag:6.4.0
                                <img src="{{ page.product.manufacturer.media|sw_encode_media_url }}"
                                     class="twt-product-detail-manufacturer-logo"
                                     alt="{{ page.product.manufacturer.translated.name }}">
                                #}
                                {% set attributes = {
                                    alt: page.product.manufacturer.translated.name,
                                    class: 'twt-product-detail-manufacturer-logo',
                                    title: page.product.manufacturer.translated.name
                                } %}

                                {% sw_thumbnails 'product-detail-manufacturer-image-thumbnails' with {
                                    media: page.product.manufacturer.media,
                                    sizes: {
                                        default: '200px'
                                    }
                                } %}
                            </div>
                        {% endif %}
                    {% endblock %}

                </div>
            </div>
        {% endblock %}
    {% endblock %}

{% endblock %}