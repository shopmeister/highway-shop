{# ThemeWare® 'Service menu' as dropdown #}
{#
    @Storefront/storefront/themeware/twt-service-menu-widget.html.twig

    NOTE: May be build with snippets in a futre version to have a seperate footer navigation.
#}

{# @deprecated tag:v4.0.0 - File will be replaced by 'includes/twt-service-menu-widget.html.twig' #}

{# @TODO: Change to Boostrap dropdown... #}

{# @TODO: Blöcke prüfen... #}

{# @TODO: Theme-Anpassungen hinzufügen #}
{# @TODO: SCSS prüfen... #}

{# ---------------- START: SET TEMPLATE VARS ---------------- #}

{# ThemeWare: Set theme variables #}
{% set twtIconSet = theme_config('twt-iconset') %}

{# ---------------- END: SET TEMPLATE VARS ---------------- #}

{# ThemeWare: Show 'Service menu' as dropdown #}
{% block twt_layout_header_actions_service_menu_widget %}
    {% if position is empty %}
        {% set position = 'top-bar' %}
    {% endif %}

    {% if page.header.serviceMenu|length > 0 %}
        <div class="top-bar-nav-item top-bar-menu">

            {% block twt_layout_header_actions_service_menu_list %}
                <div class="service-menu dropdown">
                    <button class="btn dropdown-toggle top-bar-nav-btn"
                            type="button"
                            id="serviceMenuDropdown-{{ position }}"
                            data-bs-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false">
                        {% block twt_layout_header_actions_service_menu_list_icon %}
                            {% if twtIconSet is not same as ('default') %}
                                {% sw_icon 'help' style { pack: 'themeware' } %}
                            {% else %}
                                {% sw_icon 'help' %}
                            {% endif %}
                        {% endblock %}
                        <span class="top-bar-nav-text">{{ 'header.indexLinkService'|trans|sw_sanitize }}</span>
                    </button>

                    {% block twt_layout_header_actions_service_menu_items %}
                        <div class="dropdown-menu dropdown-menu-right"
                             aria-labelledby="serviceMenuDropdown-{{ position }}"
                        >
                            {% for serviceMenuItem in page.header.serviceMenu %}
                                <a href="{{ category_url(serviceMenuItem) }}"
                                   class="top-bar-list-item dropdown-item"
                                   title="{{ serviceMenuItem.translated.name }}"
                                   {% if category_linknewtab(serviceMenuItem) %}target="_blank"{% endif %}
                                >
                                    {{ serviceMenuItem.translated.name }}
                                </a>
                            {% endfor %}
                        </div>
                    {% endblock %}
                </div>
            {% endblock %}

        </div>
    {% endif %}
{% endblock %}