{# ThemeWare® footer element 'Footer navigation' container #}
{#
	Create footer column and add shopware footer navigation

    @Storefront/storefront/themeware/footer-elements/twt-footernav.html.twig
#}

{# @TODO: twt prefix... #}
{# @TODO: Blöcke prüfen... #}
{# @TODO: Kommentare prüfen, ergänzen... #}
{# @TODO: Footer-Elemente zusammenfassen (sh. twt-sidebar-widgets) #}

{% block layout_footer_navigation_columns %}
	{% for root in page.footer.navigation.tree %}

		{% block layout_footer_navigation_column %}
			{# Add column classes #}
			{% if newcol == '2' %}
				{% set blockClasses = ['col-md-12'] %}
			{% elseif newcol == '3' %}
				{% set blockClasses = ['col-md-6'] %}
			{% else %}
				{# INFO: Add column classes for tablet viewports #}
				{% if columns == columnsTablet %}
					{% set blockClasses = ['col-md-' ~ columns] %}
				{% else %}
					{% set blockClasses = ['col-xl-' ~ columns, 'col-md-' ~ columnsTablet] %}
				{% endif %}
			{% endif %}

			{# Add default classes #}
			{% set blockClasses = ['footer-column', 'footer-column-footernav']|merge(blockClasses) %}

			{# Add toggle class #}
			{% if toggle != '4' %}
				{% set blockClasses = ['js-footer-column']|merge(blockClasses) %}
			{% endif %}

			{# Add element class and element number #}
			{% set blockClasses = ['twt-element-' ~ elementid, 'twt-element-footernav']|merge(blockClasses) %}

			{# Permanently expanded #}
			{% if toggle == '4' %}
				{% set blockClasses = ['permanent']|merge(blockClasses) %}
			{% endif %}

			{# Add class 'first' to last element #}
			{% if first == true %}
				{% set blockClasses = ['first']|merge(blockClasses) %}
			{% endif %}

			{# Add class 'last' to last element #}
			{% if last == true %}
				{% set blockClasses = ['last']|merge(blockClasses) %}
			{% endif %}

			{# #beta: The name may change in the next major release! #}
			{% block layout_footer_navigation_information_inner %}
				<div class="{{ blockClasses|reverse|join(' ') }}">

					{% block layout_footer_navigation_information_headline %}
						<div class="footer-column-headline footer-headline js-collapse-footer-column-trigger{% if toggle == '2' %} show{% endif %}"
							 data-bs-target="#collapseFooterTitle{{ loop.index }}"
							 aria-expanded="true"
							 aria-controls="collapseFooter{{ loop.index }}"
						>

							{% if root.category.type == 'folder' %}
								{{ root.category.translated.name }}
							{% else %}
								<a href="{{ category_url(root.category) }}"
								   title="{{ root.category.translated.name }}"
								   {% if category_linknewtab(root.category) %}target="_blank"{% endif %}
								>
									{{ root.category.translated.name }}
								</a>
							{% endif %}

							{% block layout_footer_navigation_information_icons %}
								{% if toggle != '4' %}
									<div class="footer-column-toggle">
										<span class="footer-plus-icon">
											{% sw_icon 'plus' style {
												ariaLabel: 'general.expand'|trans
											} %}
										</span>
												 <span class="footer-minus-icon">
											{% sw_icon 'minus' style {
												ariaLabel: 'general.collapse'|trans
											} %}
										</span>
									</div>
								 {% endif %}
							{% endblock %}

						</div>
					{% endblock %}

					{% block layout_footer_navigation_information_content %}
						<div id="collapseFooter{{ loop.index }}"
							 class="footer-column-content{% if toggle != '4' %} js-footer-column-content collapse{% endif %}{% if toggle == '2' %} show{% endif %}"
							 aria-labelledby="collapseFooterTitle{{ loop.index }}"
						>
							<div class="footer-column-content-inner">

								{% block layout_footer_navigation_information_links %}
									<ul class="list-unstyled">
										{% for treeItem in root.children %}
											{% set category = treeItem.category %}
											{% set name = category.translated.name %}

											{% block layout_footer_navigation_information_link_item %}
												<li class="footer-link-item">
													{% block layout_footer_navigation_information_link %}
														{% if category.type == 'folder' %}
															<div>{{ name }}</div>
														{% else %}
															<a href="{{ category_url(category) }}"
															   class="footer-link"
															   title="{{ name }}"
															   {% if category_linknewtab(category) %}target="_blank"{% endif %}
															>
																{{ name }}
															</a>
														{% endif %}
													{% endblock %}

												</li>
											{% endblock %}

										{% endfor %}
									</ul>
								{% endblock %}

							</div>
						</div>
					{% endblock %}

				</div>
			{% endblock %}
		{% endblock %}

	{% endfor %}
{% endblock %}