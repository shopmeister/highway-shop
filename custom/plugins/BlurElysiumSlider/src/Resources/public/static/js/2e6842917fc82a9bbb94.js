(window["webpackJsonpPluginblur-elysium-slider"]=window["webpackJsonpPluginblur-elysium-slider"]||[]).push([[6445],{1371:function(){},6445:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return r}}),i(1614);let{Component:d,Data:l,Context:t}=Shopware,{Criteria:n}=l;var r=d.wrapComponentConfig({template:'<div \n    :style="{\n        display: \'flex\',\n        flexDirection: \'column\',\n        gap: \'24px\',\n    }">\n\n    <blur-elysium-slide-search \n        :selected-slides-ids="selectedSlidesIds"\n        @slide-selected="selectSlide" />\n\n    <div v-if="selectedSlides.length > 0"\n        class="blur-elysium-slide-selection-results">\n\n        <div class="blur-elysium-slide-selection-results-list"\n            ref="selectionList"\n            @drop="onDrop($event)"\n            @dragend="dragEnd($event)"\n            @dragover.prevent\n            @dragenter.prevent>\n\n            <blur-elysium-slide-selection-item \n                v-for="slide in selectedSlides" \n                :key="slide.id"\n                :slide="slide"\n                draggable\n                @slide-loaded="slideLoaded"\n                @start-drag="startDrag"\n                @enter-drag="onDrag"\n                @position-up="slidePositionUp"\n                @position-down="slidePositionDown"\n                @edit-slide="slideEdit"\n                @remove-slide="slideRemove"/>\n\n        </div>\n    </div>\n\n    <div v-if="isLoading && selectedSlidesIds.length > 0"\n        :style="{\n            display: \'flex\',\n            flexDirection: \'column\',\n            gap: \'30px\',\n        }">\n        \n        <div v-for="placholder in selectedSlidesIds.length"\n            :key="placholder"\n            :style="{\n                minHeight: \'114px\',\n                position: \'relative\',\n                borderRadius: \'10px\',\n                overflow: \'hidden\',\n            }">\n            <mt-loader size="24px"/>\n        </div>\n    </div>\n\n    <mt-banner \n        v-if="selectedSlidesIds.length === 0"\n        variant="info">\n\n        <span v-html="$tc(\'blurElysiumSlides.slideSelection.listNoSelection\')" />\n    </mt-banner>\n\n</div>\n',inject:["repositoryFactory"],props:{selectedSlidesIds:{type:Array,required:!0}},data(){return{isLoading:!0,selectedSlides:{},currentDragIndex:0,draggedSlide:null,draggedSlideElement:null,placeholderElement:document.createElement("div")}},watch:{selectedSlides:{handler(){this.selectedSlidesIds.length=0,this.selectedSlidesIds.push(...this.selectedSlides.map(e=>e.id))},deep:!1}},computed:{slidesRepository(){return this.repositoryFactory.create("blur_elysium_slides")}},mounted(){this.placeholderElement.style.borderRadius="12px",this.placeholderElement.style.backgroundColor="#eeeeee"},methods:{initSlides(){let e=new n;e.setIds(this.selectedSlidesIds),this.slidesRepository.search(e,t.api).then(e=>{let s=e.filter(e=>this.selectedSlidesIds.includes(e.id));this.selectedSlides=s,s.length<=0&&(this.selectedSlidesIds.length=0),this.isLoading=!1}).catch(e=>{console.error("Error loading slides",e)})},selectSlide(e){(this.selectedSlidesIds.indexOf(e.id),!0===this.selectedSlidesIds.includes(e.id))?this.selectedSlides.remove(e.id):this.selectedSlides.add(e)},onDrop(){this.selectedSlides.moveItem(this.selectedSlides.indexOf(this.draggedSlide),this.currentDragIndex),this.draggedSlideElement.classList.remove("is-dragged"),this.placeholderElement.remove()},dragEnd(e){e.target.classList.remove("is-dragged"),this.placeholderElement.remove()},startDrag(e,s,i){this.draggedSlide=e,this.draggedSlideElement=i,this.placeholderElement.style.height=`${i.offsetHeight}px`},onDrag(e,s,i){this.draggedSlide===e&&this.draggedSlideElement.classList.add("is-dragged"),this.currentDragIndex!==this.selectedSlides.indexOf(e)?i.before(this.placeholderElement):i.after(this.placeholderElement),this.currentDragIndex=this.selectedSlides.indexOf(e)},slidePositionUp(e){let s=this.selectedSlides.indexOf(e);s>0&&this.selectedSlides.moveItem(s,s-1)},slidePositionDown(e){let s=this.selectedSlides.indexOf(e);s<this.selectedSlides.length-1&&this.selectedSlides.moveItem(s,s+1)},slideRemove(e){this.selectedSlides.remove(e.id)},slideEdit(e){let s=this.$router.resolve({name:"blur.elysium.slides.detail",params:{id:e.id}});window.open(s.href,"_blank")},onCreateSlide(){let e=this.$router.resolve({name:"blur.elysium.slides.create"});window.open(e.href,"_blank")},onSlideOverview(){let e=this.$router.resolve({name:"blur.elysium.slides.overview"});window.open(e.href,"_blank")}},created(){this.initSlides()}})},1614:function(e,s,i){var d=i(1371);d.__esModule&&(d=d.default),"string"==typeof d&&(d=[[e.id,d,""]]),d.locals&&(e.exports=d.locals),i(5346).Z("d755e1ca",d,!0,{})}}]);