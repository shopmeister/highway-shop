(function(){var a={306:function(){},355:function(){},526:function(){},806:function(){},814:function(){},52:function(){},246:function(){},82:function(){},291:function(){},763:function(){},366:function(){},892:function(){},200:function(){},863:function(){},964:function(){Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:"swag_amazonpay",key:"swag_amazonpay",roles:{viewer:{privileges:["sales_channel:read","sales_channel_domain:read","sales_channel_payment_method:read","system_config:read"],dependencies:[]},editor:{privileges:["sales_channel:update","sales_channel_payment_method:create","sales_channel_payment_method:update","system_config:update","system_config:create","system_config:delete"],dependencies:["swag_amazonpay.viewer"]}}})},277:function(){let{Application:a}=Shopware,n=Shopware.Classes.ApiService;class e extends n{constructor(a,n,e="swag_amazon_pay_configuration"){super(a,n,e)}getIpnUrl(){let a=`_action/${this.getApiBasePath()}/get-ipn-url`;return this.httpClient.post(a,null,{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}validateCredentials(a){let e=`_action/${this.getApiBasePath()}/inspect-connection`;return this.httpClient.post(e,a,{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}generateRsaKeys(){let a=`_action/${this.getApiBasePath()}/generate-keypair`;return this.httpClient.post(a,null,{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}sendMail(a,e){let t=`_action/${this.getApiBasePath()}/send-activation-mail`;return this.httpClient.post(t,{content:a,merchantId:e},{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}exportConfig(){let a=`_action/${this.getApiBasePath()}/export-config`;return this.httpClient.post(a,null,{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}importConfig(a,e=!1){let t=`_action/${this.getApiBasePath()}/import-config/${e}`;return this.httpClient.post(t,a,{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}getLogFiles(){let a=`_action/${this.getApiBasePath()}/log-files`;return this.httpClient.get(a,{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}generateLogArchive(a){let e=`_action/${this.getApiBasePath()}/generate-log-archive`;return this.httpClient.post(e,{files:a},{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}downloadLogArchive(a){let n=`/_action/swag_amazon_pay_configuration/download-log-archive?path=${a}`;return this.httpClient.get(n,{responseType:"blob",headers:this.getBasicHeaders()}).then(a=>a.data)}salesChannelDefault(a=null){let e=`_action/${this.getApiBasePath()}/saleschannel-default`;return this.httpClient.post(e,{salesChannelId:a},{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}}a.addServiceProvider("SwagAmazonPayConfigService",n=>new e(a.getContainer("init").httpClient,n.loginService))},242:function(){let{Application:a}=Shopware,n=Shopware.Classes.ApiService;class e extends n{constructor(a,n,e="swag-amazon-pay-order"){super(a,n,e)}fetchPaymentDetails(a,e=!1){let t=`_action/${this.getApiBasePath()}/payment-details/${a}`;return this.httpClient.get(t,{params:{refreshData:e?1:0},headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}chargePayment(a,e,t,o=""){let i=`_action/${this.getApiBasePath()}/charge-payment/${a}`;return this.httpClient.post(i,{currencyCode:t,softDescriptor:o,amount:e},{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}createCharge(a,e,t=""){let o=`_action/${this.getApiBasePath()}/create-charge/${a}`;return this.httpClient.post(o,{softDescriptor:t,amount:e},{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}cancelPayment(a,e){let t=`_action/${this.getApiBasePath()}/cancel-payment/${a}`;return this.httpClient.post(t,{closureReason:e},{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}refundPayment(a,e,t,o=""){let i=`_action/${this.getApiBasePath()}/refund-payment/${a}`;return this.httpClient.post(i,{currencyCode:t,softDescriptor:o,amount:e},{headers:this.getBasicHeaders()}).then(a=>n.handleResponse(a))}}a.addServiceProvider("SwagAmazonPayOrderService",n=>new e(a.getContainer("init").httpClient,n.loginService))},79:function(a,n,e){var t=e(306);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("b26ecf04",t,!0,{})},680:function(a,n,e){var t=e(355);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("33575517",t,!0,{})},791:function(a,n,e){var t=e(526);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("39a23705",t,!0,{})},753:function(a,n,e){var t=e(806);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("4fed5a52",t,!0,{})},802:function(a,n,e){var t=e(814);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("bd9cb942",t,!0,{})},103:function(a,n,e){var t=e(52);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("25a5fb2e",t,!0,{})},275:function(a,n,e){var t=e(246);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("8f77b948",t,!0,{})},570:function(a,n,e){var t=e(82);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("044d4ca2",t,!0,{})},416:function(a,n,e){var t=e(291);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("7dbd29a9",t,!0,{})},315:function(a,n,e){var t=e(763);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("340cdc19",t,!0,{})},812:function(a,n,e){var t=e(366);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("0c205941",t,!0,{})},249:function(a,n,e){var t=e(892);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("ac5fd244",t,!0,{})},644:function(a,n,e){var t=e(200);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("cfe86d8c",t,!0,{})},598:function(a,n,e){var t=e(863);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[a.id,t,""]]),t.locals&&(a.exports=t.locals),e(346).Z("37ff34da",t,!0,{})},346:function(a,n,e){"use strict";function t(a,n){for(var e=[],t={},o=0;o<n.length;o++){var i=n[o],s=i[0],r={id:a+":"+o,css:i[1],media:i[2],sourceMap:i[3]};t[s]?t[s].parts.push(r):e.push(t[s]={id:s,parts:[r]})}return e}e.d(n,{Z:function(){return u}});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},s=o&&(document.head||document.getElementsByTagName("head")[0]),r=null,c=0,l=!1,d=function(){},g=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function u(a,n,e,o){l=e,g=o||{};var s=t(a,n);return _(s),function(n){for(var e=[],o=0;o<s.length;o++){var r=i[s[o].id];r.refs--,e.push(r)}n?_(s=t(a,n)):s=[];for(var o=0;o<e.length;o++){var r=e[o];if(0===r.refs){for(var c=0;c<r.parts.length;c++)r.parts[c]();delete i[r.id]}}}}function _(a){for(var n=0;n<a.length;n++){var e=a[n],t=i[e.id];if(t){t.refs++;for(var o=0;o<t.parts.length;o++)t.parts[o](e.parts[o]);for(;o<e.parts.length;o++)t.parts.push(f(e.parts[o]));t.parts.length>e.parts.length&&(t.parts.length=e.parts.length)}else{for(var s=[],o=0;o<e.parts.length;o++)s.push(f(e.parts[o]));i[e.id]={id:e.id,refs:1,parts:s}}}}function h(){var a=document.createElement("style");return a.type="text/css",s.appendChild(a),a}function f(a){var n,e,t=document.querySelector("style["+m+'~="'+a.id+'"]');if(t){if(l)return d;t.parentNode.removeChild(t)}if(p){var o=c++;n=w.bind(null,t=r||(r=h()),o,!1),e=w.bind(null,t,o,!0)}else n=b.bind(null,t=h()),e=function(){t.parentNode.removeChild(t)};return n(a),function(t){t?(t.css!==a.css||t.media!==a.media||t.sourceMap!==a.sourceMap)&&n(a=t):e()}}var y=function(){var a=[];return function(n,e){return a[n]=e,a.filter(Boolean).join("\n")}}();function w(a,n,e,t){var o=e?"":t.css;if(a.styleSheet)a.styleSheet.cssText=y(n,o);else{var i=document.createTextNode(o),s=a.childNodes;s[n]&&a.removeChild(s[n]),s.length?a.insertBefore(i,s[n]):a.appendChild(i)}}function b(a,n){var e=n.css,t=n.media,o=n.sourceMap;if(t&&a.setAttribute("media",t),g.ssrId&&a.setAttribute(m,n.id),o&&(e+="\n/*# sourceURL="+o.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a.styleSheet)a.styleSheet.cssText=e;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(e))}}}},n={};function e(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={id:t,exports:{}};return a[t](i,i.exports,e),i.exports}e.d=function(a,n){for(var t in n)e.o(n,t)&&!e.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:n[t]})},e.o=function(a,n){return Object.prototype.hasOwnProperty.call(a,n)},e.p="bundles/swagamazonpay/",window?.__sw__?.assetPath&&(e.p=window.__sw__.assetPath+"/bundles/swagamazonpay/"),function(){"use strict";e(964),e(791);let{Component:a}=Shopware;a.register("swag-amazon-pay-settings",{template:'{% block swag_amazon_pay_settings %}\n<sw-page class="swag-amazon-pay-settings">\n\n    {% block swag_amazon_pay_settings_header %}\n    <template #smart-bar-header>\n        <h2>\n            {{ $tc(\'sw-settings.index.title\') }}\n            <sw-icon name="regular-chevron-right-xs" small></sw-icon>\n            {{ $tc(\'swag-amazon-pay-configuration.module.title\') }}\n        </h2>\n    </template>\n    {% endblock %}\n\n    {% block swag_amazon_pay_settings_actions %}\n    <template #smart-bar-actions>\n\n        {% block swag_amazon_pay_settings_export_config %}\n            <sw-button\n                class="sw-settings-login-registration__export-action"\n                :isLoading="isExporting"\n                :disabled="isLoading || isExporting"\n                @click="onExportConfig">\n                {{ $tc(\'swag-amazon-pay-configuration.actions.exportConfig\') }}\n            </sw-button>\n        {% endblock %}\n\n        {% block swag_amazon_pay_settings_import_config %}\n            <sw-button\n                class="sw-settings-login-registration__import-action"\n                :isLoading="isImporting"\n                :disabled="isLoading || isImporting || !acl.can(\'swag_amazonpay.editor\')"\n                @click="onImportConfig">\n                {{ $tc(\'swag-amazon-pay-configuration.actions.importConfig\') }}\n            </sw-button>\n        {% endblock %}\n\n        {% block swag_amazon_pay_settings_save %}\n            <sw-button\n                class="sw-settings-login-registration__save-action"\n                variant="primary"\n                :isLoading="isLoading"\n                :disabled="isLoading"\n                @click="onSave">\n                {{ $tc(\'global.default.save\') }}\n            </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    {% block swag_amazon_pay_settings_content %}\n        <template #content>\n            {% block swag_amazon_pay_settings_content_config_import_modal %}\n                <swag-amazon-pay-configuration-upload-modal\n                    v-if="showConfigImportModal"\n                    @modal-close="onCloseModal()">\n                </swag-amazon-pay-configuration-upload-modal>\n            {% endblock %}\n\n            <sw-card-view>\n                {% block swag_amazon_pay_settings_content_card_view %}\n                    <swag-amazon-pay-configuration\n                        salesChannelSwitchable\n                        inherit\n                        configDomain="SwagAmazonPay.settings"\n                        :parentLoading="isLoading"\n                        @change-sales-channel="onSalesChannelChange"\n                        @change-config="onConfigChange">\n                    </swag-amazon-pay-configuration>\n                {% endblock %}\n            </sw-card-view>\n        </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n',inject:["SwagAmazonPayConfigService","systemConfigApiService","acl"],mixins:["notification","sw-inline-snippet"],data(){return{isSaveSuccessful:!1,isExporting:!1,isImporting:!1,showConfigImportModal:!1,config:null,noInheritance:!0,configDomain:"SwagAmazonPay.settings",salesChannelId:null,isLoading:!1}},metaInfo(){return{title:this.$tc("swag-amazon-pay-configuration.module.title")}},methods:{async onSave(){this.isLoading=!0,null!==this.salesChannelId?null!==this.noInheritance&&await this.systemConfigApiService.saveValues({"SwagAmazonPay.settings.noInheritance":this.noInheritance},null):this.config.noInheritance=this.noInheritance;let a={};this.config.inheritFromDefault?a[this.configDomain.concat(".").concat("inheritFromDefault")]=!0:Object.keys(this.config).forEach(n=>{a[this.configDomain.concat(".").concat(n)]=this.config[n]}),this.$emit("before-save-config",a),this.systemConfigApiService.saveValues(a,this.salesChannelId).then(()=>{this.createNotificationSuccess({title:this.$tc("global.default.success"),message:this.$tc("swag-amazon-pay-configuration.notification.configSaveSuccessMessage")}),this.isSaveSuccessful=!0,this.$emit("save-config-success")}).catch(a=>{this.$emit("save-config-error",a),this.createNotificationError({title:this.$tc("global.default.error"),message:a})}).finally(()=>{this.$emit("after-save-config",a),this.isLoading=!1})},onConfigChange(a,n,e){this.config=a,this.salesChannelId=n,this.noInheritance=e},onSalesChannelChange(a){this.salesChannelId=a},onExportConfig(){this.isExporting=!0,this.SwagAmazonPayConfigService.exportConfig().then(a=>{let n=window.URL.createObjectURL(new Blob([JSON.stringify(a)])),e=document.createElement("a");e.href=n,e.setAttribute("download","swag-amazon-pay.config.json"),document.body.appendChild(e),e.click(),document.body.removeChild(e),this.isExportSuccessful=!0}).catch(()=>{this.createNotificationError({title:this.$tc("swag-amazon-pay-configuration.exception.exportConfig.title"),message:this.$tc("swag-amazon-pay-configuration.exception.exportConfig.message")})}).finally(()=>{this.isExporting=!1,this.isExportSuccessful=!1})},onCloseModal(){this.showConfigImportModal=!1,this.isImporting=!1},onImportConfig(){this.showConfigImportModal=!0,this.isImporting=!0}}});let{Component:n,Mixin:t}=Shopware;n.register("swag-amazon-pay-configuration-input-key-modal",{template:'{% block swag_amazon_pay_configuration_input_key_modal %}\n\n    <sw-modal :title="$tc(\'swag-amazon-pay-configuration.inputKeyModal.title\')" @modal-close="onCancel">\n\n        {% block swag_amazon_pay_configuration_input_key_modal_content %}\n            <sw-container gap="0px 10px">\n\n                {% block swag_amazon_pay_configuration_input_key_modal_content_info_text %}\n                    <sw-container gap="0px 10px">\n                        <sw-alert>\n                            <span v-html="$tc(\'swag-amazon-pay-configuration.inputKeyModal.infoText\')"></span>\n                        </sw-alert>\n                    </sw-container>\n                {% endblock %}\n\n                {% block swag_amazon_pay_configuration_input_key_modal_content_private_key_input %}\n                    <sw-textarea-field :label="$tc(\'swag-amazon-pay-configuration.inputKeyModal.labelContent\')" v-model:value="privateKey"></sw-textarea-field>\n                {% endblock %}\n\n            </sw-container>\n        {% endblock %}\n\n        {% block swag_amazon_pay_configuration_input_key_modal_actions %}\n            <template #modal-footer>\n\n                {% block swag_amazon_pay_configuration_input_key_modal_actions_cancel %}\n                    <sw-button size="small" @click="onCancel">\n                        {{ $tc(\'swag-amazon-pay-configuration.inputKeyModal.buttonCancel\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block swag_amazon_pay_configuration_input_key_modal_actions_send %}\n                    <sw-button variant="primary" size="small" :disabled="!privateKey" @click="onConfirm">\n                        {{ $tc(\'swag-amazon-pay-configuration.inputKeyModal.buttonSend\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-modal>\n{% endblock %}\n',inject:["SwagAmazonPayConfigService"],mixins:[t.getByName("notification"),t.getByName("sw-inline-snippet")],data(){return{privateKey:""}},methods:{onConfirm(){if(!1===this.privateKey.includes("BEGIN RSA PRIVATE KEY")&&!1===this.privateKey.includes("BEGIN PRIVATE KEY")){this.createNotificationWarning({title:this.$tc("swag-amazon-pay-configuration.inputKeyModal.notification.warning"),message:this.$tc("swag-amazon-pay-configuration.inputKeyModal.notification.invalidKeyFormat")});return}this.$emit("update-private-key",this.privateKey)},onCancel(){this.$emit("modal-close")}}}),e(79);let{Component:o}=Shopware,{Criteria:i}=Shopware.Data;o.register("swag-amazon-pay-configuration",{template:'{% block sw_system_config %}\n    <div class="sw-system-config">\n        {% block swag_amazon_pay_configuration_sales_channel_switch %}\n            <div class="sw-system-config__global-sales-channel-switch swag-amazon-pay-saleschannel-switch">\n\n                <sw-alert variant="info"\n                          :title="$tc(\'swag-amazon-pay-configuration.configForm.cards.help\')"\n                          :showIcon="true"\n                          :closable="false">\n                    <span v-html="$tc(\'swag-amazon-pay-configuration.help.helpText\')" class="swag-amazon-pay-configuration-text"></span>\n                </sw-alert>\n\n                <sw-switch-field v-model:value="hasSalesChannelSelect"\n                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.hasSalesChannelSelectLabel\')"\n                >\n                </sw-switch-field>\n                <sw-sales-channel-switch :label="$tc(\'sw-settings.system-config.labelSalesChannelSelect\')"\n                                         v-if="hasSalesChannelSelect"\n                                         @change-sales-channel-id="onSalesChannelChanged">\n                </sw-sales-channel-switch>\n\n\n\n                {% block swag_amazon_pay_configuration_sales_channel_switch_set_default_payment_method %}\n                    <sw-button class="swag-amazon-pay-configuration__salesChannelDefaultButton"\n                               :isLoading="settingDefaultSalesChannelLoading"\n                               :disabled="!acl.can(\'swag_amazonpay.editor\')"\n                               @click="onSetAmazonPayAsDefaultPaymentMethod">\n                        {{ $tc(\'swag-amazon-pay-configuration.actions.setAsDefaultPaymentMethod\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block swag_amazon_pay_configiguration_sales_channel_switch_insecure_domain_notification %}\n                    <swag-amazon-pay-insecure-domain-notification :salesChannelId="salesChannelId">\n                    </swag-amazon-pay-insecure-domain-notification>\n                {% endblock %}\n\n                {% block swag_amazon_pay_configiguration_sales_channel_switch_inherit_configuration %}\n                    <sw-switch-field v-if="isInheritanceSwitchVisible && !showLoader"\n                                     v-model:value="config.inheritFromDefault"\n                                     class="swag-amazon-pay-configuration-inheritance-field"\n                                     :disabled="!acl.can(\'swag_amazonpay.editor\')"\n                                     :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.inheritFromDefault.label\')"\n                                     @change="onSwitchInheritance">\n                    </sw-switch-field>\n                {% endblock %}\n            </div>\n        {% endblock %}\n\n        {% block swag_amazon_pay_configuration_loading %}\n            <sw-loader v-if="showLoader"></sw-loader>\n        {% endblock %}\n\n        {% block swag_amazon_pay_configuration_card_account %}\n            <sw-card v-if="!showLoader"\n                     class="swag-amazon-pay-configuration"\n                     :title="$tc(\'swag-amazon-pay-configuration.configForm.cards.account\')">\n\n                {% block swag_amazon_pay_configuration_card_account_content %}\n                    {% block swag_amazon_pay_configuration_card_account_content_configuration_text %}\n                        <div class="swag-amazon-pay-configuration-text" v-if="!config.merchantId">\n                            <span class="headline headline-m">{{ $tc(\'swag-amazon-pay-configuration.configForm.registerHeadline\') }}</span>\n                            <span v-html="$tc(\'swag-amazon-pay-configuration.configForm.registerExplanation\')" class="swag-amazon-pay-configuration-text-register-explanation"></span>\n                        </div>\n\n                        <div class="swag-amazon-pay-configuration-text" v-if="!config.merchantId">\n                            <span class="headline headline-m">{{ $tc(\'swag-amazon-pay-configuration.configForm.existingAccountHeadline\') }}</span>\n                            <span v-html="$tc(\'swag-amazon-pay-configuration.configForm.existingAccountExplanation\')" class="swag-amazon-pay-configuration-text-existing-explanation"></span>\n                        </div>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_account_content_headline_account_information %}\n                        <div class="swag-amazon-pay-configuration-text add-margin-top">\n                            <span class="headline headline-s">\n                                {{ $tc(\'swag-amazon-pay-configuration.configForm.accountHeadline\') }}\n                            </span>\n                        </div>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_account_content_option_ledger_currency %}\n                        <div class="sw-field--margin-top">\n                            <sw-single-select v-model:value="config.ledgerCurrency"\n                                              required\n                                              :options="getLedgerCurrencyOptions"\n                                              :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.ledgerCurrency.label\')"\n                                              :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.ledgerCurrency.placeholder\')"\n                                              :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.ledgerCurrency.helpText\')"\n                                              :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                            </sw-single-select>\n                        </div>\n                    {% endblock %}\n                    <div class="swag-amazon-pay-configuration-columns">\n                        <div class="column">\n\n                            {% block swag_amazon_pay_configuration_card_account_content_option_merchant_id %}\n                                <sw-text-field v-model:value="config.merchantId"\n                                               required\n                                               :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.merchantId.label\')"\n                                               :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.merchantId.placeholder\')"\n                                               :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.merchantId.helpText\')"\n                                               :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                                </sw-text-field>\n                            {% endblock %}\n                        </div>\n                        <div class="column"></div>\n                        <div class="column">\n\n                            {% block swag_amazon_pay_configuration_card_account_content_option_client_id %}\n                                <sw-text-field v-model:value="config.clientId"\n                                               required\n                                               :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.clientId.label\')"\n                                               :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.clientId.placeholder\')"\n                                               :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.clientId.helpText\')"\n                                               :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                                </sw-text-field>\n                            {% endblock %}\n                        </div>\n                    </div>\n\n                    {% block swag_amazon_pay_configuration_card_account_content_headline_credentials %}\n                        <div class="swag-amazon-pay-configuration-text add-margin-top">\n                            <span class="headline headline-s">\n                                {{ $tc(\'swag-amazon-pay-configuration.configForm.credentialsHeadline\') }}\n                            </span>\n                        </div>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_account_content_option_public_key_id %}\n                        <sw-text-field v-model:value="config.publicKeyId"\n                                       required\n                                       :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.publicKeyId.label\')"\n                                       :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.publicKeyId.placeholder\')"\n                                       :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.publicKeyId.helpText\')"\n                                       :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-text-field>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_settings_card_account_private_key_modal %}\n                        <swag-amazon-pay-configuration-input-key-modal v-if="showInputKeyModal"\n                                                                       @update-private-key="onUpdatePrivateKey"\n                                                                       @modal-close="onCloseModal()">\n                        </swag-amazon-pay-configuration-input-key-modal>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_account_content_field_private_key %}\n                        <sw-password-field :placeholder="getPrivateKeyPlaceholder()"\n                                           :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.privateKey.label\')"\n                                           :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.privateKey.helpText\')"\n                                           required\n                                           disabled\n                                           :passwordToggleAble="false">\n                        </sw-password-field>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_account_content_button_input_private_key %}\n                        <sw-button variant="primary"\n                                   :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')"\n                                   @click="displayInputKeyModal">\n                            {{ $tc(\'swag-amazon-pay-configuration.actions.insertPrivateKey\') }}\n                        </sw-button>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_account_content_config_test %}\n                        <sw-button-process v-if="!showLoader"\n                                           class="sw-settings-login-registration__test-action"\n                                           :isLoading="showLoader"\n                                           :processSuccess="isTestSuccessful"\n                                           :disabled="showLoader || isTesting || isInherited"\n                                           @click="onTest">\n                            {{ $tc(\'swag-amazon-pay-configuration.actions.testConnection\') }}\n                        </sw-button-process>\n                    {% endblock %}\n\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n\n        {% block swag_amazon_pay_configuration_card_general %}\n            <sw-card v-if="!showLoader"\n                     class="swag-amazon-pay-configuration"\n                     :title="$tc(\'swag-amazon-pay-configuration.configForm.cards.general\')">\n\n                {% block swag_amazon_pay_configuration_card_general_content %}\n                    {% block swag_amazon_pay_configuration_card_general_content_option_sandbox %}\n                        <sw-switch-field v-model:value="config.sandbox"\n                                         :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.sandbox.label\')"\n                                         :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.sandbox.helpText\')"\n                                         :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-switch-field>\n                    {% endblock %}\n\n\n                    <div class="sw-field sw-block-field sw-field--text is--disabled sw-field--default sw-field--margin-top">\n\n                        {% block swag_amazon_pay_configuration_card_general_content_ipn_url %}\n                            <sw-text-field v-if="ipnUrlLoaded"\n                                           v-model.trim="ipnUrl"\n                                           disabled\n                                           copyable\n                                           :label="$tc(\'swag-amazon-pay-configuration.configForm.labelIpnUrl\')"\n                                           :helpText="$tc(\'swag-amazon-pay-configuration.configForm.ipnHelpText\')">\n                            </sw-text-field>\n                        {% endblock %}\n                    </div>\n\n                    {% block swag_amazon_pay_configuration_card_accountgeneral_option_soft_descriptor %}\n                        <sw-text-field v-model:value="config.softDescriptor"\n                                       :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.softDescriptor.label\')"\n                                       :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.softDescriptor.placeholder\')"\n                                       :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.softDescriptor.helpText\')"\n                                       maxlength="16"\n                                       :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-text-field>\n                    {% endblock %}\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n\n        {% block swag_amazon_pay_configuration_card_display_options %}\n            <sw-card\n                    v-if="!showLoader"\n                    class="swag-amazon-pay-configuration"\n                    :title="$tc(\'swag-amazon-pay-configuration.configForm.cards.displayOptions\')">\n\n                {% block swag_amazon_pay_configuration_card_display_options_content %}\n                    <div class="swag-amazon-pay-configuration-columns">\n                        <div class="column">\n\n                            {% block swag_amazon_pay_configuration_card_display_options_content_option_product_page %}\n                                <sw-switch-field v-model:value="config.displayButtonOnProductPage"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.displayButtonOnProductPage.label\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.displayButtonOnProductPage.helpText\')"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                                </sw-switch-field>\n                            {% endblock %}\n\n                            {% block swag_amazon_pay_configuration_card_display_options_content_option_listing_page %}\n                                <sw-switch-field v-model:value="config.displayButtonOnListingPage"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.displayButtonOnListingPage.label\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.displayButtonOnListingPage.helpText\')"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                                </sw-switch-field>\n                            {% endblock %}\n\n                            {% block swag_amazon_pay_configuration_card_display_options_content_option_checkout_register %}\n                                <sw-switch-field v-model:value="config.displayButtonOnCheckoutRegisterPage"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.displayButtonOnCheckoutRegisterPage.label\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.displayButtonOnCheckoutRegisterPage.helpText\')"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                                </sw-switch-field>\n                            {% endblock %}\n\n                            {% block swag_amazon_pay_configuration_card_display_options_content_option_registration_page %}\n                                <sw-switch-field v-model:value="config.displayLoginButtonOnRegistrationPage"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.displayLoginButtonOnRegistrationPage.label\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.displayLoginButtonOnRegistrationPage.helpText\')"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                                </sw-switch-field>\n                            {% endblock %}\n\n                        </div>\n                    </div>\n\n                    <hr class="add-margin-top add-margin-bottom"/>\n\n                    {% block swag_amazon_pay_configuration_card_display_options_content_look %}\n                        <div class="swag-amazon-pay-configuration-columns">\n                            <div class="column">\n\n                                {% block swag_amazon_pay_configuration_card_display_options_content_option_button_color %}\n                                    <sw-single-select v-model:value="config.buttonColor"\n                                                      :options="buttonColorOptions"\n                                                      :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.buttonColors.label\')"\n                                                      :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.buttonColors.helpText\')"\n                                                      :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                                    </sw-single-select>\n                                {% endblock %}\n\n                            </div>\n                        </div>\n                    {% endblock %}\n\n                    <hr class="add-margin-top"/>\n\n                    <div class="swag-amazon-pay-configuration-columns add-margin-top">\n                        <div class="column">\n                            {% block swag_amazon_pay_configuration_card_display_options_content_option_hide_one_click_checkout %}\n                                <sw-switch-field v-model:value="config.hideOneClickCheckoutButtons"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.hideOneClickCheckoutButtons.label\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.hideOneClickCheckoutButtons.helpText\')"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                                </sw-switch-field>\n                            {% endblock %}\n                        </div>\n                    </div>\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n\n        {% block swag_amazon_pay_configuration_card_state_mapping %}\n            <sw-card\n                    v-if="!showLoader"\n                    class="swag-amazon-pay-configuration"\n                    :title="$tc(\'swag-amazon-pay-configuration.configForm.cards.paymentStateMapping\')">\n\n                {% block swag_amazon_pay_configuration_card_state_mapping_content %}\n                    <div class="swag-amazon-pay-configuration-text add-margin-top">\n                        {{ $tc(\'swag-amazon-pay-configuration.configForm.stateMappingExplanation\') }}\n                    </div>\n\n                    {% block swag_amazon_pay_configuration_card_state_mapping_content_option_authorize %}\n                        <sw-entity-single-select v-model:value="config.paymentStateMappingAuthorize"\n                                                 class="swag-amazon-pay-configuration-authorize"\n                                                 entity="state_machine_state"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingAuthorize.label\')"\n                                                 :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingAuthorize.placeholder\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingAuthorize.helpText\')"\n                                                 :criteria="getPaymentStateCriteria"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-entity-single-select>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_state_mapping_content_option_charge %}\n                        <sw-entity-single-select v-model:value="config.paymentStateMappingCharge"\n                                                 class="swag-amazon-pay-configuration-charge"\n                                                 entity="state_machine_state"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingCharge.label\')"\n                                                 :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingCharge.placeholder\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingCharge.helpText\')"\n                                                 :criteria="getPaymentStateCriteria"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-entity-single-select>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_state_mapping_content_option_partial_charge %}\n                        <sw-entity-single-select v-model:value="config.paymentStateMappingPartialCharge"\n                                                 class="swag-amazon-pay-configuration-partial-charge"\n                                                 entity="state_machine_state"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingPartialCharge.label\')"\n                                                 :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingPartialCharge.placeholder\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingPartialCharge.helpText\')"\n                                                 :criteria="getPaymentStateCriteria"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-entity-single-select>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_state_mapping_content_option_refund %}\n                        <sw-entity-single-select v-model:value="config.paymentStateMappingRefund"\n                                                 class="swag-amazon-pay-configuration-refund"\n                                                 entity="state_machine_state"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingRefund.label\')"\n                                                 :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingRefund.placeholder\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingRefund.helpText\')"\n                                                 :criteria="getPaymentStateCriteria"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-entity-single-select>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_state_mapping_content_option_partial_refund %}\n                        <sw-entity-single-select v-model:value="config.paymentStateMappingPartialRefund"\n                                                 class="swag-amazon-pay-configuration-partial-refund"\n                                                 entity="state_machine_state"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingPartialRefund.label\')"\n                                                 :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingPartialRefund.placeholder\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingPartialRefund.helpText\')"\n                                                 :criteria="getPaymentStateCriteria"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-entity-single-select>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_state_mapping_content_option_cancel %}\n                        <sw-entity-single-select v-model:value="config.paymentStateMappingCancel"\n                                                 class="swag-amazon-pay-configuration-cancel"\n                                                 entity="state_machine_state"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingCancel.label\')"\n                                                 :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingCancel.placeholder\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.paymentStateMappingCancel.helpText\')"\n                                                 :criteria="getPaymentStateCriteria"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-entity-single-select>\n                    {% endblock %}\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n\n        {% block swag_amazon_pay_configuration_card_advanced %}\n            <sw-card\n                    v-if="!showLoader"\n                    class="swag-amazon-pay-configuration"\n                    :title="$tc(\'swag-amazon-pay-configuration.configForm.cards.advanced\')">\n\n                {% block swag_amazon_pay_configuration_card_advanced_content %}\n                    {% block swag_amazon_pay_configuration_card_advanced_content_option_auth_mode %}\n                        <sw-single-select v-model:value="config.authMode"\n                                          required\n                                          :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.authMode.label\')"\n                                          :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.authMode.helpText\')"\n                                          :options="getAuthModeOptions"\n                                          :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-single-select>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_advanced_content_option_charge_mode %}\n                        <sw-single-select v-model:value="config.chargeMode"\n                                          required\n                                          :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.chargeMode.label\')"\n                                          :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.chargeMode.placeholder\')"\n                                          :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.chargeMode.helpText\')"\n                                          :options="getChargeModeOptions"\n                                          :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-single-select>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_advanced_content_option_charge_trigger_state %}\n                        <div v-if="isChargeOnShipping" class="sw-field--margin-top">\n                            <sw-entity-single-select v-model:value="config.orderChargeTriggerState"\n                                                     entity="state_machine_state"\n                                                     required\n                                                     :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.orderChargeTriggerState.label\')"\n                                                     :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.orderChargeTriggerState.placeholder\')"\n                                                     :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.orderChargeTriggerState.helpText\')"\n                                                     :criteria="getOrderStateCriteria"\n                                                     :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                            </sw-entity-single-select>\n                        </div>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_advanced_content_option_refund_trigger_state %}\n                        <sw-entity-single-select v-model:value="config.orderRefundTriggerState"\n                                                 entity="state_machine_state"\n                                                 :reset-option="$tc(\'swag-amazon-pay-configuration.configForm.fields.orderRefundTriggerState.resetOption\')"\n                                                 :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.orderRefundTriggerState.label\')"\n                                                 :placeholder="$tc(\'swag-amazon-pay-configuration.configForm.fields.orderRefundTriggerState.placeholder\')"\n                                                 :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.orderRefundTriggerState.helpText\')"\n                                                 :criteria="getOrderStateCriteria"\n                                                 :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                        </sw-entity-single-select>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_configuration_card_advanced_content_exclusions %}\n                        {% block swag_amazon_pay_configuration_card_advanced_content_exclusions_products %}\n                            <sw-entity-multi-id-select v-model:value="config.excludedProductIds"\n                                                       :disabled="!acl.can(\'swag_amazonpay.editor\')"\n                                                       :repository="productRepository"\n                                                       :criteria="excludedProductCriteria"\n                                                       :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.excludedProductIds.label\')"\n                                                       :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.excludedProductIds.helpText\')">\n\n                                {% block swag_amazon_pay_configuration_card_advanced_content_exclusions_products_selection_label_property %}\n                                    <template #selection-label-property="{ item }">\n                                        <sw-product-variant-info\n                                                :variations="item.variation">\n                                            {{ item.translated.name || item.name }}\n                                        </sw-product-variant-info>\n                                    </template>\n                                {% endblock %}\n\n                                {% block swag_amazon_pay_configuration_card_advanced_content_exclusions_products_result_label_property %}\n                                    <template #result-label-property="{ item, searchTerm, highlightSearchTerm }">\n                                        <sw-product-variant-info\n                                                :variations="item.variation">\n                                            {{ item.translated.name || item.name }}\n                                        </sw-product-variant-info>\n                                    </template>\n                                {% endblock %}\n\n                            </sw-entity-multi-id-select>\n                        {% endblock %}\n\n                        {% block swag_amazon_pay_configuration_card_advanced_content_exclusions_product_streams %}\n                            <sw-entity-multi-id-select v-model:value="config.excludedProductStreamIds"\n                                                       :disabled="!acl.can(\'swag_amazonpay.editor\')"\n                                                       :repository="productStreamRepository"\n                                                       :label="$tc(\'swag-amazon-pay-configuration.configForm.fields.excludedProductStreamIds.label\')"\n                                                       :helpText="$tc(\'swag-amazon-pay-configuration.configForm.fields.excludedProductStreamIds.helpText\')">\n                            </sw-entity-multi-id-select>\n                        {% endblock %}\n                    {% endblock %}\n\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n\n        {% block swag_amazon_pay_configuration_card_logging %}\n            <sw-card\n                    v-if="!showLoader"\n                    class="swag-amazon-pay-configuration"\n                    :title="$tc(\'swag-amazon-pay-configuration.configForm.cards.logHandling\')">\n\n                {% block swag_amazon_pay_configuration_card_logging_content_mode %}\n                    <div class="swag-amazon-pay-configuration-text">\n                        {{ $tc(\'swag-amazon-pay-configuration.configForm.loggingExplanation\') }}\n                        <span class="headline headline-s">{{ $tc(\'swag-amazon-pay-configuration.configForm.loggingHeadline\') }}</span>\n                    </div>\n\n                    <div class="swag-amazon-pay-configuration-radio-help-text-columns">\n                        <div class="column-left">\n\n                            {% block swag_amazon_pay_configuration_card_logging_content_option_logging_mode %}\n                                <sw-radio-field v-model:value="config.loggingMode"\n                                                :options="getLoggingOptions"\n                                                :disabled="isInherited || !acl.can(\'swag_amazonpay.editor\')">\n                                </sw-radio-field>\n                            {% endblock %}\n                        </div>\n                        <div class="column-right">\n                            <sw-help-text class="sw-field__help-text" :text="$tc(\'swag-amazon-pay-configuration.configForm.loggingBasicHelp\')"></sw-help-text>\n                            <sw-help-text class="sw-field__help-text" :text="$tc(\'swag-amazon-pay-configuration.configForm.loggingAdvancedHelp\')"></sw-help-text>\n                        </div>\n                    </div>\n                {% endblock %}\n\n                {% block swag_amazon_pay_configuration_card_logging_toolbar %}\n                    <template #toolbar>\n                        <swag-amazon-pay-configuration-log-download :availableLogFiles="availableLogFiles">\n                        </swag-amazon-pay-configuration-log-download>\n                    </template>\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n    </div>\n{% endblock %}\n\n\n',inject:["SwagAmazonPayConfigService","systemConfigApiService","repositoryFactory","acl"],mixins:["notification"],props:{configDomain:{type:String,required:!1,default:null},parentLoading:{type:Boolean,required:!1,default:!1}},data(){return{hasSalesChannelSelect:null,salesChannelId:null,isTestSuccessful:!1,isTesting:!1,showInputKeyModal:!1,ipnUrl:"https://example.com/",ipnUrlLoaded:!1,availableLogFiles:[],fallbackConfig:null,isLoading:!1,settingDefaultSalesChannelLoading:!1,defaultConfig:{merchantId:null,publicKeyId:null,privateKey:null,clientId:null,sandbox:!1,hideOneClickCheckoutButtons:!1,displayButtonOnProductPage:!0,displayButtonOnListingPage:!1,displayButtonOnCheckoutRegisterPage:!0,paymentStateMappingCharge:null,paymentStateMappingPartialCharge:null,paymentStateMappingRefund:null,paymentStateMappingPartialRefund:null,paymentStateMappingCancel:null,paymentStateMappingAuthorize:null,authMode:"immediately",chargeMode:"direct",orderChargeTriggerState:null,orderRefundTriggerState:null,excludedItems:null,sendErrorMail:null,loggingMode:"basic",ledgerCurrency:"EUR",softDescriptor:null,displayLoginButtonOnRegistrationPage:!0,inheritFromDefault:!1,buttonColor:"Gold",excludedProductIds:[],excludedProductStreamIds:[]},config:{},configBeforeInheritanceSwitch:null}},computed:{getRelevantConfigSalesChannelId(){return!0===this.config.inheritFromDefault?null:this.salesChannelId},isChargeOnShipping(){return"shipped"===this.config.chargeMode},isInheritanceSwitchVisible(){return!!(!this.isLoading&&this.salesChannelId)},getLedgerCurrencyOptions(){return[{value:"EUR",label:this.$tc("swag-amazon-pay-configuration.configForm.fields.ledgerCurrency.options.EUR")},{value:"GBP",label:this.$tc("swag-amazon-pay-configuration.configForm.fields.ledgerCurrency.options.GBP")},{value:"USD",label:this.$tc("swag-amazon-pay-configuration.configForm.fields.ledgerCurrency.options.USD")}]},getAuthModeOptions(){return[{value:"immediately",label:this.$tc("swag-amazon-pay-configuration.configForm.fields.authMode.options.immediately")},{value:"canHandlePending",label:this.$tc("swag-amazon-pay-configuration.configForm.fields.authMode.options.canHandlePending")}]},getChargeModeOptions(){return[{value:"direct",label:this.$tc("swag-amazon-pay-configuration.configForm.fields.chargeMode.options.direct")},{value:"shipped",label:this.$tc("swag-amazon-pay-configuration.configForm.fields.chargeMode.options.shipped")},{value:"manually",label:this.$tc("swag-amazon-pay-configuration.configForm.fields.chargeMode.options.manually")}]},getLoggingOptions(){return[{value:"basic",name:this.$tc("swag-amazon-pay-configuration.configForm.fields.loggingMode.options.basic")},{value:"advanced",name:this.$tc("swag-amazon-pay-configuration.configForm.fields.loggingMode.options.advanced")}]},isInherited(){return!!this.salesChannelId&&this.config.inheritFromDefault},getOrderStateCriteria(){let a=new i(1,100);return a.addAssociation("stateMachine"),a.addFilter(i.equalsAny("state_machine_state.stateMachine.technicalName",["order.state"])),a},getPaymentStateCriteria(){let a=new i(1,100);return a.addAssociation("stateMachine"),a.addFilter(i.equalsAny("state_machine_state.stateMachine.technicalName",["order_transaction.state"])),a},showLoader(){return this.parentLoading||this.isLoading},buttonColorOptions(){return[{label:this.$tc("swag-amazon-pay-configuration.configForm.fields.buttonColors.gold"),value:"Gold"},{label:this.$tc("swag-amazon-pay-configuration.configForm.fields.buttonColors.lightGray"),value:"LightGray"},{label:this.$tc("swag-amazon-pay-configuration.configForm.fields.buttonColors.darkGray"),value:"DarkGray"}]},productRepository(){return this.repositoryFactory.create("product")},productStreamRepository(){return this.repositoryFactory.create("product_stream")},excludedProductCriteria(){let a=new i(1,25);return a.addAssociation("options.group"),a}},watch:{config(){this.emitConfigChange()},hasSalesChannelSelect(a){this.emitConfigChange(),a||null===this.salesChannelId||this.onSalesChannelChanged(null)}},created(){this.createdComponent()},methods:{emitConfigChange(){this.$emit("change-config",this.config,this.salesChannelId,!this.hasSalesChannelSelect)},createdComponent(){this.loadConfig(),this.getIpnUrl(),this.getLogFiles()},loadConfig(){let a={};this.isLoading=!0,null===this.hasSalesChannelSelect&&this.systemConfigApiService.getValues(this.configDomain,null).then(a=>{a["SwagAmazonPay.settings.noInheritance"]?this.hasSalesChannelSelect=!1:this.hasSalesChannelSelect=!0}),this.systemConfigApiService.getValues(this.configDomain,this.salesChannelId).then(n=>{if(Object.keys(n).forEach(e=>{a[e.replace(`${this.configDomain}.`,"")]=n[e]}),a["SwagAmazonPay.settings.noInheritance"]&&delete a["SwagAmazonPay.settings.noInheritance"],Object.keys(a).length<1){this.config={...this.defaultConfig};return}if(Object.keys(this.defaultConfig).forEach(n=>{Shopware.Utils.object.hasOwnProperty(a,n)||(a[n]=this.defaultConfig[n])}),!this.salesChannelId){this.config=a,this.fallbackConfig=a;return}if(a.inheritFromDefault){this.config=this.fallbackConfig,this.config.inheritFromDefault=!0,this.configBeforeInheritanceSwitch=a;return}this.config=a}).finally(()=>{this.isLoading=!1})},getPrivateKeyPlaceholder(){return this.config.privateKey?"XXXXXXXXXXX":this.$tc("swag-amazon-pay-configuration.configForm.privateKeyEmpty")},getIpnUrl(){this.SwagAmazonPayConfigService.getIpnUrl().then(a=>{this.ipnUrl=a.url,this.ipnUrlLoaded=!0})},getLogFiles(){this.SwagAmazonPayConfigService.getLogFiles().then(a=>{Object.keys(a).forEach(n=>this.addLogFile(a,n))})},addLogFile(a,n){this.availableLogFiles.push({fileName:a[n]})},onTest(){this.isTestSuccessful=!1,this.isTesting=!0;let a={merchantId:this.config.merchantId,publicKeyId:this.config.publicKeyId,privateKey:this.config.privateKey,ledgerCurrency:this.config.ledgerCurrency,clientId:this.config.clientId,sandbox:this.config.sandbox,salesChannel:this.salesChannelId};this.SwagAmazonPayConfigService.validateCredentials(a).then(a=>{a.success?(this.createNotificationSuccess({title:this.$tc("swag-amazon-pay-configuration.notification.inspectConnectionTitle"),message:this.$tc(a.message)}),this.isTestSuccessful=!0,setTimeout(this.resetTestStatus,2e3)):this.createNotificationError({title:this.$tc("swag-amazon-pay-configuration.notification.inspectConnectionTitle"),message:this.$tc(a.message)+a.exceptionMessage})}).catch(()=>{this.createNotificationError({title:this.$tc("swag-amazon-pay-configuration.notification.inspectConnectionTitle"),message:this.$tc("swag-amazon-pay-configuration.exception.genericError")})}).finally(()=>{this.isTesting=!1})},onSwitchInheritance(a){a?(this.configBeforeInheritanceSwitch={...this.config},this.configBeforeInheritanceSwitch.inheritFromDefault=!1,this.config=this.fallbackConfig,this.config.inheritFromDefault=!0):(this.config={...this.configBeforeInheritanceSwitch},this.config.inheritFromDefault=!1),this.emitConfigChange()},displayInputKeyModal(){this.showInputKeyModal=!0},onUpdatePrivateKey(a){this.config.privateKey=a,this.showInputKeyModal=!1},resetTestStatus(){this.isTestSuccessful=!1},onCloseModal(){this.showInputKeyModal=!1},onSalesChannelChanged(a){this.salesChannelId=a,this.$emit("change-sales-channel",a),this.loadConfig()},onSetAmazonPayAsDefaultPaymentMethod(){this.settingDefaultSalesChannelLoading=!0,this.SwagAmazonPayConfigService.salesChannelDefault(this.salesChannelId).then(()=>{window.setTimeout(()=>{this.settingDefaultSalesChannelLoading=!1},250)})}}});let{Component:s,Mixin:r}=Shopware;s.register("swag-amazon-pay-configuration-upload-modal",{template:'{% block swag_amazon_pay_import_config_modal %}\n<sw-modal :title="$tc(\'swag-amazon-pay-configuration.importModal.title\')"\n          @modal-close="onCancel">\n\n    {% block swag_amazon_pay_import_config_modal_content %}\n        <sw-container gap="0px 10px">\n\n            {% block swag_amazon_pay_import_config_modal_content_warning %}\n                <sw-alert variant="info"\n                          :title="$tc(\'swag-amazon-pay-configuration.importModal.warning.title\')"\n                          :showIcon="true"\n                          :closable="false">\n                   {{ $tc(\'swag-amazon-pay-configuration.importModal.warning.content\') }}\n                </sw-alert>\n            {% endblock %}\n\n            {% block swag_amazon_pay_import_config_modal_content_version_missmatch_notification %}\n                <sw-modal v-if="versions"\n                          :title="$tc(\'swag-amazon-pay-configuration.importModal.warning.title\')"\n                          @modal-close="onCancelNotification">\n\n                    <sw-alert variant="warning"\n                              :showIcon="true"\n                              :closable="false">\n                        <p>{{ $tc(\'swag-amazon-pay-configuration.importModal.versionMismatch.info\') }}</p>\n                    </sw-alert>\n\n                    <p v-html="$tc(\'swag-amazon-pay-configuration.importModal.versionMismatch.current\', 0, {\n                            shopwareVersion: versions.current.shopware,\n                            pluginVersion: versions.current.plugin\n                        })">\n                    </p>\n                    <p v-html="$tc(\'swag-amazon-pay-configuration.importModal.versionMismatch.export\', 0, {\n                            shopwareVersion: versions.state.shopware,\n                            pluginVersion: versions.state.plugin\n                        })">\n                    </p>\n\n                    {% block swag_amazon_pay_import_config_modal_content_version_missmatch_notification_footer %}\n                        <template #modal-footer>\n                            <sw-button :disabled="false"\n                                       variant="ghost"\n                                       :square="false"\n                                       :block="false"\n                                       :isLoading="false"\n                                       @click="onCancelNotification">\n                                {{ $tc(\'global.default.cancel\') }}\n                            </sw-button>\n\n                            <sw-button :disabled="false"\n                                       variant="danger"\n                                       :square="false"\n                                       :block="false"\n                                       :isLoading="false"\n                                       @click="onSubmit(true)">\n                                {{ $tc(\'swag-amazon-pay-configuration.importModal.versionMismatch.proceed\') }}\n                            </sw-button>\n                        </template>\n                    {% endblock %}\n                </sw-modal>\n            {% endblock %}\n\n            {% block swag_amazon_pay_import_config_modal_content_file_upload %}\n                <sw-file-input\n                    v-model:value="selectedFile"\n                    :label="$tc(\'swag-amazon-pay-configuration.importModal.infoText\')"\n                    :allowedMimeTypes="[\'application/json\']">\n                </sw-file-input>\n            {% endblock %}\n        </sw-container>\n    {% endblock %}\n\n    {% block swag_amazon_pay_import_config_modal_actions %}\n        <template #modal-footer>\n\n            {% block swag_amazon_pay_import_config_modal_actions_cancel %}\n                <sw-button size="small" @click="onCancel">\n                    {{ $tc(\'global.default.cancel\') }}\n                </sw-button>\n            {% endblock %}\n\n            {% block swag_amazon_pay_import_config_modal_actions_import %}\n                <sw-button variant="primary"\n                           size="small"\n                           :disabled="!selectedFile"\n                           :isLoading="isLoading"\n                           @click="onSubmit(false)">\n                    {{ $tc(\'global.default.apply\') }}\n                </sw-button>\n            {% endblock %}\n        </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n',inject:["SwagAmazonPayConfigService"],mixins:[r.getByName("notification"),r.getByName("sw-inline-snippet")],data(){return{isLoading:!1,selectedFile:null,versions:null}},methods:{onSubmit(a=!1){if(this.versions=null,!this.selectedFile){this.createNotificationError({title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:this.$tc("swag-amazon-pay-configuration.importModal.notification.noFileSelected")});return}this.isLoading=!0,this.SwagAmazonPayConfigService.importConfig(this.selectedFile,a).then(a=>{if(this.isLoading=!1,"current"in a&&"state"in a){this.versions=a;return}this.createNotificationSuccess({title:this.$tc("global.default.success"),message:this.$tc("swag-amazon-pay-configuration.importModal.notification.success")}),setTimeout(()=>window.location.reload(),1e3)}).catch(()=>{this.isLoading=!1,this.createNotificationError({title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:this.$tc("swag-amazon-pay-configuration.importModal.notification.error")})})},onCancel(){this.$emit("modal-close")},onCancelNotification(){this.versions=null}}});let{Component:c,Mixin:l}=Shopware;c.register("swag-amazon-pay-configuration-log-download",{template:'{% block swag_amazon_pay_configuration_card_logging_content_download %}\n    <sw-container>\n        {% block swag_amazon_pay_configuration_card_logging_content_download_available_logfiles %}\n            <sw-multi-select\n                v-model:value="selectedLogFiles"\n                valueProperty="fileName"\n                labelProperty="fileName"\n                :label="$tc(\'swag-amazon-pay-configuration.logDownload.selectLabel\')"\n                :options="availableLogFiles"\n                :value="selectedLogFiles"\n                :disabled="isPreparingArchive"\n                @change="onChangeFileSelection">\n            </sw-multi-select>\n        {% endblock %}\n\n        {% block swag_amazon_pay_configuration_card_logging_content_download_button %}\n            <div class="column-left">\n                <sw-button\n                    v-if="selectedLogFiles"\n                    :isLoading="isPreparingArchive"\n                    :disabled="selectedLogFiles.length < 1"\n                    @click="onDownloadLogFile">\n\n                    {{ $tc(\'swag-amazon-pay-configuration.logDownload.buttonDownload\') }}\n                </sw-button>\n            </div>\n        {% endblock %}\n    </sw-container>\n{% endblock %}\n',inject:["SwagAmazonPayConfigService"],mixins:[l.getByName("notification"),l.getByName("sw-inline-snippet")],props:{availableLogFiles:{type:Array,required:!1,default:null}},data(){return{selectedLogFiles:[],isPreparingArchive:!1,downloadPath:null}},methods:{onDownloadLogFile(){if(this.selectedLogFiles){if(this.downloadPath){this.downloadFile(this.downloadPath,Shopware.Context.api);return}this.isPreparingArchive=!0,this.SwagAmazonPayConfigService.generateLogArchive(this.selectedLogFiles).then(a=>{this.downloadFile(a,Shopware.Context.api)}).catch(()=>{this.createNotificationError({title:this.$tc("global.default.error"),message:this.$tc("swag-amazon-pay-configuration.exception.genericError")})}).finally(()=>{this.isPreparingArchive=!1})}},downloadFile(a){this.downloadPath=a,this.SwagAmazonPayConfigService.downloadLogArchive(a).then(a=>{let n=document.createElement("a");n.setAttribute("download","swag-amazon-pay-logs.zip"),n.href=window.URL.createObjectURL(new Blob([a])),document.body.appendChild(n),n.click(),document.body.removeChild(n)})},onChangeFileSelection(){this.downloadPath=null}}});let{Component:d,Mixin:g}=Shopware,m=Shopware.Data.Criteria;d.register("swag-amazon-pay-insecure-domain-notification",{template:'{% block swag_amazon_pay_configiguration_component_insecure_domain_notification %}\n    <div>\n        {% block swag_amazon_pay_configiguration_component_insecure_domain_notification_warning %}\n            <sw-alert v-if="hasInsecureDomains"\n                      variant="warning"\n                      :title="$tc(\'global.default.info\')"\n                      :showIcon="true"\n                      :closable="false">\n                <div class="swag-amazon-pay-configuration-text">\n                    {{ $tc(\'swag-amazon-pay-configuration.insecureDomainNotification.salesChannel\') }}\n\n                    {% block swag_amazon_pay_configiguration_component_insecure_domain_notification_warning_domains %}\n                        <ul>\n                            <li v-for="item in insecureDomains[salesChannelId]">\n                                {{ item }}\n                            </li>\n                        </ul>\n                    {% endblock %}\n\n                </div>\n            </sw-alert>\n        {% endblock %}\n\n    </div>\n{% endblock %}\n',inject:["repositoryFactory"],mixins:[g.getByName("notification"),g.getByName("sw-inline-snippet")],props:{salesChannelId:{required:!1,type:String,default:""}},data(){return{insecureDomains:[]}},computed:{salesChannelDomainRepository(){return this.repositoryFactory.create("sales_channel_domain")},hasInsecureDomains(){return!!(this.salesChannelId&&this.salesChannelId in this.insecureDomains)}},created(){this.createdComponent()},methods:{createdComponent(){this.loadInsecureDomains()},loadInsecureDomains(){let a=new m(1,500);return a.addFilter(m.multi("AND",[m.contains("url","http://")])),this.salesChannelDomainRepository.search(a,Shopware.Context.api).then(a=>{a.forEach(a=>{let n=a.salesChannelId,e=a.url;n in this.insecureDomains||(this.insecureDomains[n]=[]),this.insecureDomains[n].push(e)})})}}}),e(680);let{Component:p}=Shopware;p.register("swag-amazon-pay-settings-icon",{template:'{% block swag_amazon_pay_settings_icon %}\n    <div class="swag-amazon-pay-settings-icon">\n        <img class="sw-settings-index__amazon-pay-icon" :src="assetFilter(\'swagamazonpay/static/img/plugin.svg\')">\n    </div>\n{% endblock %}\n',computed:{assetFilter(){return Shopware.Filter.getByName("asset")}}});let{Module:u}=Shopware;u.register("swag-amazon-pay-configuration",{type:"plugin",name:"SwagAmazonPayConfiguration",title:"swag-amazon-pay-configuration.module.title",description:"swag-amazon-pay-configuration.module.description",version:"1.0.0",targetVersion:"1.0.0",routes:{config:{component:"swag-amazon-pay-settings",path:"config",meta:{parentPath:"sw.extension.my-extensions",privilege:"swag_amazonpay.viewer"}}},settingsItem:{group:"plugins",to:"swag.amazon.pay.configuration.config",iconComponent:"swag-amazon-pay-settings-icon",backgroundEnabled:!0,privilege:"swag_amazonpay.viewer"}}),e(277),e(644);let{Component:_,Context:h}=Shopware,{Criteria:f}=Shopware.Data;_.override("sw-order-detail",{template:'{% block sw_order_detail_content_tabs_general %}\n    {% parent %}\n\n    {% block swag_amazon_pay_order_payment_tab %}\n        <template v-if="!isLoadingAmazonTransactions && amazonPayTransactions">\n            <sw-tabs-item v-for="amazonTransaction in amazonPayTransactions"\n                          v-bind:key="amazonTransaction.id"\n                          :route="getAmazonPayDetailsRoute(amazonTransaction.id)"\n                          :title="$tc(\'swag-amazon-pay-order.general.description\')">\n                {{ $tc(\'swag-amazon-pay-order.general.title\') }}\n            </sw-tabs-item>\n        </template>\n    {% endblock %}\n{% endblock %}\n\n{% block sw_order_detail_content_view %}\n    \n    {% parent %}\n{% endblock %}\n',data(){return{isLoadingAmazonTransactions:!0,amazonPayTransactions:[],hasIncompleteTransaction:!1}},computed:{showTabs(){return!0}},watch:{orderId:{deep:!0,handler(){this.loadAmazonPayTransactions(this.orderId)},immediate:!0}},methods:{loadAmazonPayTransactions(a){if(!a){this.isLoadingAmazonPayTransactions=!1;return}this.amazonPayTransactions=[],this.isLoadingAmazonPayTransactions=!0;let n=this.repositoryFactory.create("order"),e=new f(1,1);e.addAssociation("transactions"),e.addFilter(f.equals("transactions.paymentMethodId","f7b88fc9c0104702a96f664dabfe2656")),e.addFilter(f.equals("id",a)),n.search(e,h.api).then(a=>{let n=a.first();n&&(this.identifier||(this.identifier=n.orderNumber),n.transactions.forEach(a=>{if(a.customFields&&a.customFields.swag_amazon_pay_charge_permission_id){this.amazonPayTransactions.push(a);return}this.hasIncompleteTransaction=!0}))}).finally(()=>{this.isLoadingAmazonTransactions=!1})},getAmazonPayDetailsRoute(a){return{name:"swag-amazon-pay-order.payment.detail",params:{id:this.$route.params.id,transactionId:a}}}}}),e(598);let{Component:y,Mixin:w,Context:b}=Shopware,z=Shopware.Data.Criteria;y.register("swag-amazon-pay-order-tab",{template:'{% block swag_amazon_pay_order_payment_page %}\n    <div class="swag-amazon-pay-order-page">\n\n        {% block swag_amazon_pay_order_payment_page_warning %}\n            <sw-container columns="1fr" class="swag-amazon-pay-order-notification-container">\n                <sw-alert v-if="isPartiallyCharged" variant="warning" appearance="default" :showIcon="true" :closable="false">\n                    {{ $tc(\'swag-amazon-pay-order.notification.isPartialCharged\') }} {{ $tc(\'swag-amazon-pay-order.notification.partialCharge\') }}\n                </sw-alert>\n                <sw-alert v-if="isInvalidChargePermission" variant="warning" appearance="default" :showIcon="true" :closable="false">\n                    {{ $tc(\'swag-amazon-pay-order.notification.invalidChargePermission\') }}\n                </sw-alert>\n            </sw-container>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_payment_page_content %}\n            <template v-if="!isLoading">\n\n                {% block swag_amazon_pay_order_payment_page_content_general_card %}\n                    <sw-card rows="2"\n                             :title="$tc(\'swag-amazon-pay-order.general.generalCardTitle\')"\n                             :isLoading="isLoading">\n\n                        {% block swag_amazon_pay_order_payment_page_content_general_card_top %}\n                            <sw-container columns="1fr 1fr" class="swag-amazon-pay-order-page__general-content">\n\n                                {% block swag_amazon_pay_order_payment_page_content_general_card_top_buyer_info %}\n                                    <swag-amazon-pay-buyer-info :paymentDetails="paymentDetails"\n                                                                :order="order">\n                                    </swag-amazon-pay-buyer-info>\n                                {% endblock %}\n\n                                {% block swag_amazon_pay_order_payment_page_content_general_card_top_amount_info %}\n                                    <swag-amazon-pay-amount-info :paymentDetails="paymentDetails"\n                                                                 :transaction="transaction"\n                                                                 :refundStatus="refundStatus"\n                                                                 :order="order"\n                                                                 :isInvalidChargePermission="isInvalidChargePermission">\n                                    </swag-amazon-pay-amount-info>\n                                {% endblock %}\n\n                                {% block swag_amazon_pay_order_payment_page_content_general_card_top_toolbar %}\n\n                                    <swag-amazon-pay-action-toolbar :paymentDetails="paymentDetails" @reload-payment="reloadOrderDetails" @update-payment-details="reloadOrderDetails(true)">\n                                    </swag-amazon-pay-action-toolbar>\n                                {% endblock %}\n\n                            </sw-container>\n                        {% endblock %}\n\n                        {% block swag_amazon_pay_order_payment_page_content_general_card_bottom %}\n                            <sw-container columns="1fr" class="sw-card-section sw-card-section--secondary">\n\n                                {% block swag_amazon_pay_order_payment_page_content_general_card_bottom_checkout_info %}\n                                    <swag-amazon-pay-checkout-info :paymentDetails="paymentDetails"\n                                                                   :transaction="transaction"\n                                                                   :order="order">\n                                    </swag-amazon-pay-checkout-info>\n                                {% endblock %}\n\n                            </sw-container>\n                        {% endblock %}\n\n                    </sw-card>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_payment_page_content_payment_history_card %}\n                    <sw-card rows="2"\n                             :title="$tc(\'swag-amazon-pay-order.payment-history.cardTitle\')">\n\n                        {% block swag_amazon_pay_order_payment_page_content_payment_history_card_content %}\n                            <template #grid>\n                                <swag-amazon-pay-payment-history :paymentDetails="paymentDetails" @reload-payment="reloadOrderDetails">\n                                </swag-amazon-pay-payment-history>\n                            </template>\n                        {% endblock %}\n\n                    </sw-card>\n                {% endblock %}\n\n            </template>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_payment_page_content_loader %}\n            <sw-loader v-if="isLoading"></sw-loader>\n        {% endblock %}\n    </div>\n{% endblock %}\n',inject:["SwagAmazonPayOrderService","repositoryFactory"],mixins:[w.getByName("notification"),w.getByName("sw-inline-snippet")],data(){return{paymentDetails:{chargePermission:{limits:{amountLimit:null},presentmentCurrency:"EUR",statusDetails:null},charge:{captureAmount:null,refundedAmount:null,statusDetails:null}},refundStatus:null,refundPending:!1,order:null,isLoading:!0,isSuccess:!0,transaction:null,refreshHandler:null}},computed:{orderRepository(){return this.repositoryFactory.create("order")},transactionRepository(){return this.repositoryFactory.create("order_transaction")},isInvalidChargePermission(){return!0!==this.isSuccess&&!1===this.isLoading&&!this.paymentDetails.chargePermission.reference},isPartiallyCharged(){return!0===this.isSuccess&&this.paymentDetails.isPartiallyCaptured}},watch:{$route(){this.resetDataAttributes(),this.createdComponent()}},beforeDestroy(){window.clearInterval(this.refreshHandler)},created(){this.createdComponent()},methods:{createdComponent(){this.loadData()},resetDataAttributes(){this.paymentDetails=null,this.isLoading=!0,this.isSuccess=!1,this.transaction=null},reloadOrderDetails(a=!1){return this.isSuccess=!0,this.loadData(a)},loadTransactionDetails(a=!1){let n=this.$route.params.transactionId;return n?this.loadTransaction(n).then(n=>{let e=n.customFields.swag_amazon_pay_charge_permission_id;return(this.refreshHandler&&window.clearInterval(this.refreshHandler),n.customFields&&n.customFields.swag_amazon_pay_charge_permission_id)?(this.transaction=n,this.loadPaymentDetails(e,a).then(a=>(this.isLoading=!1,a.chargePermission)?(this.paymentDetails=a,this.isSuccess=!0,Promise.resolve()):(this.displayErrorMessage(),Promise.reject()))):(this.displayErrorMessage(),Promise.reject())}):Promise.resolve()},backgroundLoadPaymentHistory(a){this.loadPaymentDetails(a,!1).then(a=>{a.chargePermission&&(this.paymentDetails=a)})},loadData(a=!1){a&&(this.isLoading=!0);let n=this.$route.params.id;return this.loadOrder(n).then(n=>(this.order=n,this.loadTransactionDetails(a)))},loadOrder(a){let n=new z(1,1);return n.addAssociation("addresses"),n.addAssociation("currency"),n.addAssociation("deliveries"),n.addAssociation("orderCustomer.salutation"),this.orderRepository.get(a,b.api,n)},loadTransaction(a){return this.transactionRepository.get(a,b.api)},loadPaymentDetails(a,n=!1){return this.SwagAmazonPayOrderService.fetchPaymentDetails(a,n)},displayErrorMessage(a){let n=this.$tc("swag-amazon-pay-order.general.errors.incompletePaymentProcess");a&&a.response&&a.response.data&&a.response.data.errors&&(n=a.response.data.errors[0].detail),this.createNotificationError({title:this.$tc("global.default.error"),message:n}),this.isSuccess=!1,this.isLoading=!1}}}),e(103);let{Component:v}=Shopware;v.register("swag-amazon-pay-buyer-info",{template:'{% block swag_amazon_pay_order_component_buyer_info %}\n    <div class="swag-amazon-pay-buyer-info__container">\n        {# Logo #}\n        {% block swag_amazon_pay_order_component_buyer_info_logo %}\n            <div class="swag-amazon-pay-buyer-info__icon-container" align="center">\n                <img class="swag-amazon-pay-buyer-info__amazon-pay-icon"\n                     :src="assetFilter(\'swagamazonpay/static/img/plugin.svg\')">\n            </div>\n        {% endblock %}\n\n        {# Full name and E-Mail address #}\n        {% block swag_amazon_pay_order_component_buyer_info_name_container %}\n            <div class="swag-amazon-pay-buyer-info__name-container">\n\n                {% block swag_amazon_pay_order_component_buyer_info_name_container_name %}\n                    <div class="swag-amazon-pay-buyer-info__full-name">\n                        {{ customerSalutation }} {{ order.orderCustomer.firstName }} {{ order.orderCustomer.lastName }}\n                    </div>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_component_buyer_info_name_container_email %}\n                    <div class="swag-amazon-pay-buyer-info__email">\n                        {{ order.orderCustomer.email }}\n                    </div>\n                {% endblock %}\n            </div>\n        {% endblock %}\n    </div>\n{% endblock %}\n',props:{paymentDetails:{type:Object,required:!0},order:{type:Object,required:!0}},computed:{customerSalutation(){return"not_specified"===this.order.orderCustomer.salutation.salutationKey?"":this.order.orderCustomer.salutation.displayName},assetFilter(){return Shopware.Filter.getByName("asset")}}}),e(802);let{Component:k}=Shopware,{currency:C}=Shopware.Utils.format;k.register("swag-amazon-pay-amount-info",{template:'{% block swag_amazon_pay_order_component_amount_info %}\n    <sw-container class="swag-amazon-pay-amount-info__container" rows="4" columns="1fr">\n\n        {% block swag_amazon_pay_order_component_amount_info_total %}\n            <div class="swag-amazon-pay-amount-info__total-amount" align="right">\n                {{ totalAmount }}\n            </div>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_component_amount_info_card %}\n            <sw-card v-if="!isInvalidChargePermission"\n                     :isLoading="isLoading"\n                     :hero="true"\n                     class="swag-amazon-pay-amount-info__card-amounts">\n\n                {% block swag_amazon_pay_order_component_amount_info_captured %}\n                    <div class="swag-amazon-pay-amount-info__captured-amount" align="right">\n\n                        {% block swag_amazon_pay_order_component_amount_info_captured_amount %}\n                            +{{ chargedAmount }}\n                        {% endblock %}\n\n                        {% block swag_amazon_pay_order_component_amount_info_captured_help %}\n                            <sw-help-text class="swag-amazon-pay-amount-info__help-icon"\n                                          tooltipPosition="top"\n                                          :text="$tc(\'swag-amazon-pay-order.amount-info.chargeTooltip\', 0, {\n                                              amount: chargedAmount\n                                          })">\n                            </sw-help-text>\n                        {% endblock %}\n\n                    </div>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_component_amount_info_refunded %}\n                    <div class="swag-amazon-pay-amount-info__refunded-amount" align="right">\n                        {% block swag_amazon_pay_order_component_amount_info_refund_amount %}\n                            -{{ refundedAmount }}\n                            <span v-if="hasPendingRefunds">(-{{ refundPendingAmount }})</span>\n                        {% endblock %}\n\n                        {% block swag_amazon_pay_order_component_amount_info_refunded_help %}\n                            <sw-help-text class="swag-amazon-pay-amount-info__help-icon"\n                                          tooltipPosition="top"\n                                          :text="$tc(\'swag-amazon-pay-order.amount-info.refundTooltip\', 0, {\n                                              amount: refundedAmount\n                                          })">\n                            </sw-help-text>\n                        {% endblock %}\n                    </div>\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_component_amount_info_date %}\n            <div class="swag-amazon-pay-amount-info__charge-date" align="right">\n                {{ dateFilter(transaction.createdAt) }}\n            </div>\n        {% endblock %}\n    </sw-container>\n{% endblock %}\n',props:{paymentDetails:{type:Object,required:!0},transaction:{type:Object,required:!0},order:{type:Object,required:!0},refundStatus:{type:Object,required:!1,default:null},isInvalidChargePermission:{type:Boolean,required:!1,default:!1}},computed:{isLoading(){return!this.paymentDetails.chargePermission.reference},totalAmount(){return C(this.paymentDetails.chargePermission.amount||this.totalOrderPrice,this.paymentDetails.chargePermission.currency)},totalOrderPrice(){return C(this.order.price.totalPrice,this.order.currency.isoCode)},chargedAmount(){return C(this.paymentDetails.chargePermission.capturedAmount||0,this.paymentDetails.chargePermission.currency)},refundedAmount(){return C(this.paymentDetails.totalRefundedAmount||0,this.paymentDetails.chargePermission.currency)},refundPendingAmount(){return C(this.paymentDetails.totalRefundPendingAmount||0,this.paymentDetails.chargePermission.currency)},hasPendingRefunds(){return this.paymentDetails.hasPendingRefunds},dateFilter(){return Shopware.Filter.getByName("date")}}}),e(753);let{Component:S}=Shopware;S.register("swag-amazon-pay-action-toolbar",{template:'{% block swag_amazon_pay_order_component_action_toolbar %}\n    <sw-container class="swag-amazon-pay-action-toolbar__container" rows="1" columns="1fr 1fr 1fr" gap="10px">\n\n        {% block swag_amazon_pay_order_component_action_toolbar_cancel_button %}\n            <sw-button size="small"\n                       class="swag-amazon-pay-action-toolbar__button"\n                       variant="ghost"\n                       @click="updatePaymentDetails">\n                {{ $tc(\'swag-amazon-pay-order.action-toolbar.refresh\') }}\n            </sw-button>\n            <sw-button\n                       v-if="paymentDetails.chargePermission.status === \'Chargeable\'"\n                       size="small"\n                       class="swag-amazon-pay-action-toolbar__button"\n                       variant="ghost"\n                       @click="showCreateChargeModal">\n                {{ $tc(\'swag-amazon-pay-order.action-toolbar.createCharge\') }}\n            </sw-button>\n            <sw-button size="small"\n                       class="swag-amazon-pay-action-toolbar__button"\n                       :disabled="!acl.can(\'order.editor\')"\n                       v-if="!disableCancellation"\n                       variant="ghost-danger"\n                       @click="showCancelModal">\n                {{ $tc(\'swag-amazon-pay-order.action-toolbar.cancel\') }}\n            </sw-button>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_component_action_toolbar_modals %}\n            <swag-amazon-pay-cancel-modal\n                v-if="cancelModalVisible"\n                :paymentDetails="paymentDetails"\n                @modal-close="closeModals"\n                @reload-payment="reloadPaymentDetails">\n            </swag-amazon-pay-cancel-modal>\n            <swag-amazon-pay-create-charge-modal\n                    v-if="createChargeModalVisible"\n                    :paymentDetails="paymentDetails"\n                    @modal-close="closeModals"\n                    @reload-payment="reloadPaymentDetails">\n            </swag-amazon-pay-create-charge-modal>\n        {% endblock %}\n    </sw-container>\n{% endblock %}\n',inject:["acl"],props:{paymentDetails:{type:Object,required:!0}},data(){return{cancelModalVisible:!1,createChargeModalVisible:!1}},computed:{disableCancellation(){let a=this.paymentDetails.chargePermission.status;return null===a||"Closed"===a}},methods:{showCancelModal(){this.cancelModalVisible=!0},showCreateChargeModal(){this.createChargeModalVisible=!0},closeModals(){this.cancelModalVisible=!1,this.createChargeModalVisible=!1},updatePaymentDetails(){this.$emit("update-payment-details")},reloadPaymentDetails(){this.closeModals(),this.$nextTick().then(()=>{this.$emit("reload-payment")})}}}),e(416);let{Component:$}=Shopware;$.register("swag-amazon-pay-checkout-info",{template:'{% block swag_amazon_pay_order_component_checkout_info %}\n    <sw-container class="swag-amazon-pay-checkout-info__container" columns="1fr 1fr" rows="2">\n\n        {% block swag_amazon_pay_order_component_checkout_info_checkout_id_container %}\n            <div class="swag-amazon-pay-checkout-info__checkout-id-container">\n\n                {% block swag_amazon_pay_order_component_checkout_info_checkout_id_container_headline %}\n                    <div class="swag-amazon-pay-checkout-info_header">\n                        {{ $tc(\'swag-amazon-pay-order.checkout-info.referenceIdHeadline\') }}\n                    </div>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_component_checkout_info_checkout_id_container_value %}\n                    <div class="swag-amazon-pay-checkout-info_label">\n                        {{ transaction.customFields.swag_amazon_pay_charge_permission_id }}\n                    </div>\n                {% endblock %}\n            </div>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_component_checkout_info_status_container %}\n            <div class="swag-amazon-pay-checkout-info__status-container">\n\n                {% block swag_amazon_pay_order_component_checkout_info_status_container_headline %}\n                    <div class="swag-amazon-pay-checkout-info_header">\n                        {{ $tc(\'swag-amazon-pay-order.checkout-info.statusHeadline\') }}\n                    </div>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_component_checkout_info_status_container_value %}\n                    <div v-if="paymentStatusText" class="swag-amazon-pay-checkout-info_label">\n                        {{ paymentStatusText }}\n                    </div>\n                {% endblock %}\n            </div>\n        {% endblock %}\n        {#\n        {% block swag_amazon_pay_order_component_checkout_info_billing_container %}\n            <div class="swag-amazon-pay-checkout-info__billing-address-container">\n\n                {% block swag_amazon_pay_order_component_checkout_info_billing_container_headline %}\n                    <div class="swag-amazon-pay-checkout-info_header">\n                        {{ $tc(\'swag-amazon-pay-order.checkout-info.billingAddressHeadline\') }}\n                    </div>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_component_checkout_info_billing_container_value %}\n                    <sw-address :address="billingAddress">\n                    </sw-address>\n                {% endblock %}\n            </div>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_component_checkout_info_shipping_container %}\n            <div class="swag-amazon-pay-checkout-info__shipping-address-container">\n\n                {% block swag_amazon_pay_order_component_checkout_info_shipping_container_headline %}\n                    <div class="swag-amazon-pay-checkout-info_header">\n                        {{ $tc(\'swag-amazon-pay-order.checkout-info.shippingAddressHeadline\') }}\n                    </div>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_component_checkout_info_shipping_container_value %}\n                    <sw-address :address="shippingAddress">\n                    </sw-address>\n                {% endblock %}\n            </div>\n        {% endblock %}\n        #}\n    </sw-container>\n{% endblock %}\n',props:{paymentDetails:{type:Object,required:!0},transaction:{type:Object,required:!0},order:{type:Object,required:!0}},computed:{billingAddress(){let a=this.order.billingAddressId;return this.order.addresses.get(a)},shippingAddress(){return this.order.deliveries.last().shippingOrderAddress},paymentStatusText(){return this.paymentDetails.chargePermission.status}}}),e(570);let{Component:x,Mixin:P}=Shopware,{currency:A}=Shopware.Utils.format;x.register("swag-amazon-pay-charge-modal",{template:'{% block swag_amazon_pay_order_charge_modal %}\n<sw-modal :title="$tc(\'swag-amazon-pay-order.charge-modal.title\')"\n          @modal-close="closeModal">\n\n    {% block swag_amazon_pay_order_charge_modal_content %}\n    <template #default>\n\n        {% block swag_amazon_pay_order_charge_modal_content_info_text %}\n            <div class="swag-amazon-pay-charge-modal__info-text">\n                <span>\n                    {{ $tc(\'swag-amazon-pay-order.charge-modal.infoText\') }}\n                </span>\n            </div>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_charge_modal_content_max_amount %}\n            <div class="swag-amazon-pay-charge-modal__info-maximum-amount">\n                 <span>\n                      {{ $tc(\'swag-amazon-pay-order.charge-modal.maximumAmount\', 0, { amount: chargeAmountLimitFormatted }) }}\n                 </span>\n            </div>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_charge_modal_content_fields %}\n            <div class="swag-amazon-pay-charge-modal__field-container">\n\n                {% block swag_amazon_pay_order_charge_modal_content_fields_amount %}\n                    <sw-number-field v-model:value="chargeAmount"\n                              {# The template string is used to convert the refund amount to a string #}\n                              :placeholder="`${chargeAmountLimit}`"\n                              :label="$tc(\'swag-amazon-pay-order.charge-modal.amountFieldLabel\')"\n                              :min="0"\n                              :max="chargeAmountLimit">\n                        <template #suffix>\n                            <span class="swag-amazon-pay-charge-modal__currency-code">{{ paymentDetails.chargePermission.currency }}</span>\n                        </template>\n                    </sw-number-field>\n                {% endblock %}\n\n            </div>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    {% block swag_amazon_pay_order_charge_modal_actions %}\n        <template #modal-footer>\n\n            {% block swag_amazon_pay_order_charge_modal_cancel %}\n                <sw-button size="small" @click="closeModal">\n                    {{ $tc(\'global.default.cancel\') }}\n                </sw-button>\n            {% endblock %}\n\n            {% block swag_amazon_pay_order_charge_modal_confirm %}\n            <sw-button variant="primary"\n                       size="small"\n                       :isLoading="isLoading"\n                       @click="onConfirm">\n                {{ $tc(\'swag-amazon-pay-order.charge-modal.buttonConfirm\') }}\n            </sw-button>\n            {% endblock %}\n        </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n',inject:["SwagAmazonPayOrderService"],mixins:[P.getByName("notification"),P.getByName("sw-inline-snippet")],props:{paymentDetails:{type:Object,required:!0},chargeId:{type:String,required:!0}},data(){return{isLoading:!1,chargeAmount:null}},beforeMount(){this.chargeAmount=this.chargeAmountLimit},computed:{chargeAmountLimitFormatted(){return A(this.chargeAmountLimit,this.paymentDetails.chargePermission.currency)},chargeAmountLimit(){let a=this.getCharge();return a.amount-a.capturedAmount}},methods:{closeModal(){this.$emit("modal-close")},getCharge(){return this.paymentDetails.charges[this.chargeId]?this.paymentDetails.charges[this.chargeId].details:null},onConfirm(){(!this.chargeAmount||isNaN(this.chargeAmount)||!Number.isFinite(this.chargeAmount||0===this.chargeAmount))&&(this.chargeAmount=this.chargeAmountLimit);let a=this.paymentDetails.chargePermission.currency,n=A(this.chargeAmount,a);this.isLoading=!0,this.SwagAmazonPayOrderService.chargePayment(this.chargeId,this.chargeAmount,a).then(a=>{a.chargeId?(this.createNotificationSuccess({title:this.$tc("global.default.success"),message:this.$tc("swag-amazon-pay-order.charge-modal.notification.success",0,{amount:n})}),this.$emit("reload-payment")):(this.createNotificationError({title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:a.message}),this.isLoading=!1)}).catch(a=>{this.createNotificationError({title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:a.message}),this.isLoading=!1})}}}),e(315);let{Component:M,Mixin:F}=Shopware,{currency:I}=Shopware.Utils.format;M.register("swag-amazon-pay-create-charge-modal",{template:'{% block swag_amazon_pay_order_charge_modal %}\n<sw-modal :title="$tc(\'swag-amazon-pay-order.create-charge-modal.title\')"\n          @modal-close="closeModal">\n\n    {% block swag_amazon_pay_order_charge_modal_content %}\n    <template #default>\n        {% block swag_amazon_pay_order_charge_modal_content_fields %}\n            <div class="swag-amazon-pay-create-charge-modal__field-container">\n\n                {% block swag_amazon_pay_order_charge_modal_content_fields_amount %}\n                    <sw-number-field v-model:value="chargeAmount"\n                              :label="$tc(\'swag-amazon-pay-order.create-charge-modal.amountFieldLabel\')"\n                              :min="0">\n                        <template #suffix>\n                            <span class="swag-amazon-pay-create-charge-modal__currency-code">{{ paymentDetails.chargePermission.currency }}</span>\n                        </template>\n                    </sw-number-field>\n                {% endblock %}\n\n            </div>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    {% block swag_amazon_pay_order_charge_modal_actions %}\n        <template #modal-footer>\n\n            {% block swag_amazon_pay_order_charge_modal_cancel %}\n                <sw-button size="small" @click="closeModal">\n                    {{ $tc(\'global.default.cancel\') }}\n                </sw-button>\n            {% endblock %}\n\n            {% block swag_amazon_pay_order_charge_modal_confirm %}\n            <sw-button variant="primary"\n                       size="small"\n                       :isLoading="isLoading"\n                       @click="onConfirm">\n                {{ $tc(\'swag-amazon-pay-order.create-charge-modal.buttonConfirm\') }}\n            </sw-button>\n            {% endblock %}\n        </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n',inject:["SwagAmazonPayOrderService"],mixins:[F.getByName("notification"),F.getByName("sw-inline-snippet")],props:{paymentDetails:{type:Object,required:!0}},data(){return{isLoading:!1,chargeAmount:null}},beforeMount(){this.chargeAmount=this.chargeAmountLimit},computed:{chargeAmountLimitFormatted(){return I(this.chargeAmountLimit,this.paymentDetails.chargePermission.currency)},chargeAmountLimit(){return this.paymentDetails.chargePermission.amount-this.paymentDetails.totalChargedAmount}},methods:{closeModal(){this.$emit("modal-close")},onConfirm(){this.chargeAmount||(this.chargeAmount=this.chargeAmountLimit);let a=this.paymentDetails.chargePermission.currency,n=I(this.chargeAmount,a);this.isLoading=!0,this.SwagAmazonPayOrderService.createCharge(this.paymentDetails.chargePermission.reference,this.chargeAmount).then(a=>{a.chargeId?(this.$emit("reload-payment"),this.createNotificationSuccess({title:this.$tc("global.default.success"),message:this.$tc("swag-amazon-pay-order.create-charge-modal.notification.success",0,{amount:n})})):(this.createNotificationError({title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:a.message}),this.isLoading=!1)}).catch(a=>{this.createNotificationError({title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:a.message})}).finally(()=>{this.isLoading=!1,this.closeModal()})}}}),e(249);let{Component:D,Mixin:L}=Shopware,{currency:T}=Shopware.Utils.format;D.register("swag-amazon-pay-refund-modal",{template:'{% block swag_amazon_pay_order_refund_modal %}\n    <sw-modal :title="$tc(\'swag-amazon-pay-order.refund-modal.title\')"\n              @modal-close="closeModal">\n\n        {% block swag_amazon_pay_order_refund_modal_content %}\n            <template #default>\n\n                {% block swag_amazon_pay_order_refund_modal_content_info_text %}\n                    {#\n                    <div class="swag-amazon-pay-refund-modal__info-text">\n                        <span>\n                            {{ $tc(\'swag-amazon-pay-order.refund-modal.infoText\') }}\n                        </span>\n                    </div>\n                    #}\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_refund_modal_content_max_amount %}\n                    {#\n                    <div class="swag-amazon-pay-refund-modal__info-maximum-amount">\n                         <span>\n                              {{ $tc(\'swag-amazon-pay-order.refund-modal.maximumAmount\', 0, { refundAmountLimit: refundAmountLimitFormatted }) }}\n                         </span>\n                    </div>\n                    #}\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_refund_modal_content_fields %}\n                    <div class="swag-amazon-pay-refund-modal__field-container">\n\n                    {% block swag_amazon_pay_order_refund_modal_content_fields_amount %}\n                        <sw-number-field v-model:value="refundAmount"\n                                  {# The template string is used to convert the refund amount to a string #}\n                                  :placeholder="refundAmountDefault"\n                                  :label="$tc(\'swag-amazon-pay-order.refund-modal.amountFieldLabel\') + \' \' + $tc(\'swag-amazon-pay-order.refund-modal.maximumAmount\', 0, { refundAmountLimit: refundAmountLimitFormatted })"\n                                  :min="0"\n                                  :max="refundAmountLimit">\n                            <template #suffix>\n                                <span class="swag-amazon-pay-refund-modal__currency-code">{{ paymentDetails.chargePermission.currency }}</span>\n                            </template>\n                        </sw-number-field>\n                    {% endblock %}\n\n                    {% block swag_amazon_pay_order_refund_modal_content_fields_reason %}\n                        <sw-text-field v-model:value="reason"\n                                  :placeholder="$tc(\'swag-amazon-pay-order.refund-modal.reasonPlaceholder\')"\n                                  :label="$tc(\'swag-amazon-pay-order.refund-modal.reasonFieldLabel\')">\n                                  maxlength="16">\n                        </sw-text-field>\n                    {% endblock %}\n\n                    </div>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_refund_modal_actions %}\n            <template #modal-footer>\n\n                {% block swag_amazon_pay_order_refund_modal_cancel %}\n                    <sw-button size="small" @click="closeModal">\n                        {{ $tc(\'global.default.cancel\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_refund_modal_confirm %}\n                    <sw-button variant="primary"\n                               size="small"\n                               :isLoading="isLoading"\n                               @click="onConfirm">\n                        {{ $tc(\'swag-amazon-pay-order.refund-modal.buttonConfirm\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-modal>\n{% endblock %}\n',inject:["SwagAmazonPayOrderService"],mixins:[L.getByName("notification"),L.getByName("sw-inline-snippet")],props:{paymentDetails:{type:Object,required:!0},chargeId:{type:String,required:!0}},data(){return{isLoading:!1,refundAmount:null,reason:""}},beforeMount(){this.refundAmount=this.getDefaultRefundAmount()},computed:{refundAmountLimit(){let a=this.getCharge();return null===a?0:a.maxRefundableAmount},refundAmountLimitFormatted(){return T(this.refundAmountLimit,this.paymentDetails.chargePermission.currency,2)},refundAmountDefault(){this.getDefaultRefundAmount()}},methods:{closeModal(){this.$emit("modal-close")},getDefaultRefundAmount(){let a=this.getCharge();return null===a?0:a.defaultRefundableAmount},getCharge(){return this.paymentDetails.charges[this.chargeId]?this.paymentDetails.charges[this.chargeId]:null},validateForm(){return(!this.refundAmount||isNaN(this.refundAmount)||!Number.isFinite(this.refundAmount)||0===this.refundAmount||this.refundAmount>this.refundAmountLimit)&&(this.refundAmount=this.refundAmountDefault),!0},onConfirm(){if(!0!==this.validateForm())return;let a=this.paymentDetails.chargePermission.currency,n=T(this.refundAmount,a,2);this.isLoading=!0,this.SwagAmazonPayOrderService.refundPayment(this.chargeId,this.refundAmount,a,this.reason).then(a=>{a.chargeId?(this.createNotificationSuccess({title:this.$tc("global.default.success"),message:this.$tc("swag-amazon-pay-order.refund-modal.notification.success",0,{amount:n})}),this.$emit("reload-payment")):(this.createNotificationError({title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:a.message}),this.isLoading=!1)}).catch(a=>{this.createNotificationError({title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:a.message}),this.isLoading=!1})}}}),e(275);let{Component:B,Mixin:O}=Shopware;B.register("swag-amazon-pay-cancel-modal",{template:'{% block swag_amazon_pay_order_cancel_modal %}\n    <sw-modal :title="$tc(\'swag-amazon-pay-order.cancel-modal.title\')"\n              @modal-close="closeModal">\n\n        {% block swag_amazon_pay_order_cancel_modal_content %}\n            <template #default>\n\n                {% block swag_amazon_pay_order_cancel_modal_content_info_text %}\n                    <div class="swag-amazon-pay-cancel-modal__info-text">\n                        <span>\n                            {{ $tc(\'swag-amazon-pay-order.cancel-modal.infoText\') }}\n                        </span>\n                    </div>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_cancel_modal_content_max_amount %}\n                    <div class="swag-amazon-pay-cancel-modal__info-maximum-amount">\n                         <span>\n                            {{ $tc(\'swag-amazon-pay-order.cancel-modal.infoTextReason\') }}\n                         </span>\n                    </div>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_cancel_modal_content_fields %}\n                    <div class="swag-amazon-pay-cancel-modal__field-container">\n\n                    {% block swag_amazon_pay_order_cancel_modal_content_fields_reason %}\n                        <sw-text-field v-model:value="reason"\n                                  :required="true"\n                                  :placeholder="$tc(\'swag-amazon-pay-order.cancel-modal.reasonPlaceholder\')"\n                                  :label="$tc(\'swag-amazon-pay-order.cancel-modal.reasonFieldLabel\')">\n                        </sw-text-field>\n                    {% endblock %}\n\n                    </div>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block swag_amazon_pay_order_cancel_modal_actions %}\n            <template #modal-footer>\n\n                {% block swag_amazon_pay_order_cancel_modal_cancel %}\n                    <sw-button size="small" @click="closeModal">\n                        {{ $tc(\'global.default.cancel\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block swag_amazon_pay_order_cancel_modal_confirm %}\n                    <sw-button variant="primary"\n                               size="small"\n                               :isLoading="isLoading"\n                               :disabled="!reason"\n                               @click="onConfirm">\n                        {{ $tc(\'swag-amazon-pay-order.refund-modal.buttonConfirm\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-modal>\n{% endblock %}\n',inject:["SwagAmazonPayOrderService"],mixins:[O.getByName("notification"),O.getByName("sw-inline-snippet")],props:{paymentDetails:{type:Object,required:!0}},data(){return{isLoading:!1,reason:""}},methods:{closeModal(){this.$emit("modal-close")},onConfirm(){this.reason&&(this.isLoading=!0,this.SwagAmazonPayOrderService.cancelPayment(this.paymentDetails.chargePermission.reference,this.reason).then(a=>{if(a.statusDetails&&"Closed"===a.statusDetails.state){this.createNotificationSuccess({title:this.$tc("global.default.success"),message:this.$tc("swag-amazon-pay-order.cancel-modal.notification.success")}),this.$emit("reload-payment");return}let n={title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:this.$tc("swag-amazon-pay-order.cancel-modal.notification.error")};a.message&&(n.message=a.message),this.createNotificationError(n)}).catch(a=>{this.createNotificationError({title:this.$tc("global.notification.unspecifiedSaveErrorMessage"),message:a.message})}).finally(()=>{this.isLoading=!1}))}}}),e(812);let{Component:R,Context:N}=Shopware,{currency:E}=Shopware.Utils.format;R.register("swag-amazon-pay-payment-history",{template:'{% block swag_amazon_pay_order_component_payment_history %}\n    <div>\n        <sw-data-grid\n                ref="swDataGrid"\n                :dataSource="paymentDetails.transactionsCombined"\n                :showSelection="false"\n                :isLoading="isLoading"\n                :compactMode="false"\n                :showActions="false"\n                :columns="columns">\n\n\n            {% block swag_amazon_pay_order_component_payment_history_data_grid_column_created %}\n                <template #column-time="{ item }">\n                    {{ dateFilter(item.time, { hour: \'2-digit\', minute: \'2-digit\',day: \'2-digit\', month: \'2-digit\', year: \'2-digit\' }) }}\n                </template>\n            {% endblock %}\n            {% block swag_amazon_pay_order_component_payment_history_data_grid_column_amount %}\n                <template #column-amount="{ item }">\n                    <div v-if="item.type === \'Charge\' && item.status === \'Captured\'" class="amazon-pay-transaction-amount">{{ formatCurrency(item.capturedAmount) }}</div>\n                    <div v-if="(item.type !== \'Charge\' || item.status !== \'Captured\') && item.type !== \'Refund\'" class="amazon-pay-transaction-amount">{{ formatCurrency(item.amount) }}</div>\n                    <div v-if="item.type === \'Refund\'" class="amazon-pay-transaction-amount amazon-pay-transaction-amount-negative">{{ formatCurrency(-item.amount) }}</div>\n                </template>\n            {% endblock %}\n            {% block swag_amazon_pay_order_component_payment_history_data_grid_column_status %}\n                <template #column-status="{ item }">\n                    <span\n                            :class="{\n                                \'amazon-pay-transaction-status-success\':(item.status === \'Captured\' ||item.status === \'Refunded\'),\n                                \'amazon-pay-transaction-status-info\':(item.status === \'Authorized\' || item.status === \'RefundInitiated\'),\n                                \'amazon-pay-transaction-status-warning\':(item.status === \'AuthorizationInitiated\'),\n                                \'amazon-pay-transaction-status-danger\':(item.status === \'Declined\' || item.status === \'Canceled\')\n                        }">\n                        {{ item.status }}</span>\n                </template>\n            {% endblock %}\n            {% block swag_amazon_pay_order_component_payment_history_data_grid_column_actions %}\n                <template #column-actions="{ item }">\n                    <sw-button\n                            v-if="item.type === \'Charge\' && paymentDetails.charges[item.reference].maxRefundableAmount > 0"\n                            size="small"\n                            class="swag-amazon-pay-action-toolbar__button"\n                            :disabled="!acl.can(\'order.editor\')"\n                            variant="ghost"\n                            @click="showRefundModal(item)">\n                        {{ $tc(\'swag-amazon-pay-order.action-toolbar.refund\') }}\n                    </sw-button>\n                    <sw-button size="small"\n                               v-if="item.type === \'Charge\' && item.status === \'Authorized\'"\n                               class="swag-amazon-pay-action-toolbar__button"\n                               :disabled="!acl.can(\'order.editor\')"\n                               variant="ghost"\n                               @click="showCaptureModal(item)">\n                        {{ $tc(\'swag-amazon-pay-order.action-toolbar.charge\') }}\n                    </sw-button>\n                </template>\n            {% endblock %}\n\n        </sw-data-grid>\n        <swag-amazon-pay-refund-modal\n                v-if="refundModalVisible"\n                :paymentDetails="paymentDetails"\n                :chargeId="refundChargeId"\n                @modal-close="closeModals"\n                @reload-payment="reloadPaymentDetails">\n        </swag-amazon-pay-refund-modal>\n        <swag-amazon-pay-charge-modal\n                v-if="captureModalVisible"\n                :paymentDetails="paymentDetails"\n                :chargeId="captureChargeId"\n                @modal-close="closeModals"\n                @reload-payment="reloadPaymentDetails">\n        </swag-amazon-pay-charge-modal>\n    </div>\n{% endblock %}\n',inject:["acl"],props:{paymentDetails:{type:Object,required:!0}},data(){return{paymentNotifications:[],refundModalVisible:!1,captureModalVisible:!1,refundChargeId:null,captureChargeId:null,repository:null,isLoading:!1}},computed:{columns(){return[{property:"type",dataIndex:"type",label:this.$tc("swag-amazon-pay-order.payment-history.columns.subject"),primary:!0},{property:"reference",dataIndex:"reference",label:this.$tc("swag-amazon-pay-order.payment-history.columns.objectId")},{property:"amount",dataIndex:"amount",label:this.$tc("swag-amazon-pay-order.payment-history.columns.amount")},{property:"status",dataIndex:"status",align:"center",label:this.$tc("swag-amazon-pay-order.payment-history.columns.status")},{property:"time",dataIndex:"time",label:this.$tc("swag-amazon-pay-order.payment-history.columns.date")},{property:"actions",dataIndex:"actions",label:this.$tc("swag-amazon-pay-order.payment-history.columns.actions")}]},dateFilter(){return Shopware.Filter.getByName("date")}},created(){},methods:{showRefundModal(a){this.refundChargeId=a.reference,this.refundModalVisible=!0},showCaptureModal(a){this.captureChargeId=a.reference,this.captureModalVisible=!0},closeModals(){this.captureModalVisible=!1,this.refundModalVisible=!1},reloadPaymentDetails(){this.closeModals(),this.$nextTick().then(()=>{this.$emit("reload-payment")})},formatCurrency(a){return E(a||0,this.paymentDetails.chargePermission.currency)}}});let{Module:j}=Shopware;j.register("swag-amazon-pay-order",{type:"plugin",name:"SwagAmazonPayOrder",title:"swag-amazon-pay-order.general.title",description:"swag-amazon-pay-order.general.description",version:"1.0.0",targetVersion:"1.0.0",routeMiddleware(a,n){"sw.order.detail"===n.name&&n.children.push({component:"swag-amazon-pay-order-tab",name:"swag-amazon-pay-order.payment.detail",isChildren:!0,path:"/sw/order/swag-amazon-pay-order/detail/:id/:transactionId",meta:{parentPath:"sw.order.index",privilege:"order.viewer"}}),a(n)}}),e(242);let{Component:K}=Shopware;K.override("sw-extension-card-base",{template:"{% block sw_extension_card_base_context_menu_actions %}\n    {% parent %}\n\n    <sw-context-menu-item\n        v-if=\"extension.name === 'SwagAmazonPay' && extension.active === true\"\n        @click=\"onSwagAmazonPaySettings()\">\n        {{ $tc('sw-extension-store.component.sw-extension-card-base.contextMenu.config') }}\n    </sw-context-menu-item>\n{% endblock %}\n",methods:{onSwagAmazonPaySettings(){this.$router.push({name:"swag.amazon.pay.configuration.config"})}}})}()})();