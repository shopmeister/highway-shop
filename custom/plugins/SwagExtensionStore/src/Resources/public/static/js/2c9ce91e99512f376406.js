(window["webpackJsonpPluginswag-extension-store"]=window["webpackJsonpPluginswag-extension-store"]||[]).push([[215],{5548:function(){},8215:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return i}}),t(7239);let{Utils:s}=Shopware;var i={template:'{% block sw_extension_buy_modal %}\n<sw-modal\n    class="sw-extension-buy-modal"\n    :title="$tc(\'sw-extension-store.component.sw-extension-buy-modal.title\')"\n    size="600px"\n    :isLoading="isLoading"\n    @modal-close="emitClose"\n>\n\n    {% block sw_extension_buy_modal_content %}\n        <template v-if="checkoutStep === checkoutSteps.SUCCESS">\n            {% block sw_extension_buy_modal_adding_success_content %}\n                <sw-extension-adding-success\n                    @close="emitClose">\n                </sw-extension-adding-success>\n            {% endblock %}\n        </template>\n\n        <template v-else-if="checkoutStep === checkoutSteps.FAILED">\n            {% block sw_extension_buy_modal_adding_failed_content %}\n                <sw-extension-adding-failed\n                    :extensionName="extension.name"\n                    :title="checkoutError && checkoutError.title"\n                    :detail="checkoutError && checkoutError.detail"\n                    :documentationLink="checkoutErrorDocumentationLink"\n                    @close="emitClose">\n                </sw-extension-adding-failed>\n            {% endblock %}\n        </template>\n\n        <template v-else>\n            {% block sw_extension_buy_modal_content_not_installed %}\n                {% block sw_extension_buy_modal_variant_selection %}\n                    <div class="sw-extension-buy-modal__variants-selection">\n                        {% block sw_extension_buy_modal_variant_selection_content %}\n                            {% block sw_extension_buy_modal_variant_selection_extension_preview %}\n                                <div class="sw-extension-buy-modal__extension-summary">\n                                    {% block sw_extension_buy_modal_variant_selection_extension_preview_content %}\n                                        {% block sw_extension_buy_modal_variant_selection_extension_icon %}\n                                            <sw-extension-icon :src="extension.icon" />\n                                        {% endblock %}\n\n                                        {% block sw_extension_buy_modal_variant_selection_extension_name %}\n                                            <h4 class="sw-extension-buy-modal__extension-summary-name">\n                                                {{ extension.label }}\n                                            </h4>\n                                        {% endblock %}\n\n                                        {% block sw_extension_buy_modal_variant_selection_extension_trial_phase %}\n                                            <p\n                                                v-if="isVariantOfTypeRent(selectedVariant) && firstMonthFree"\n                                                class="sw-extension-buy-modal__extension-summary-trial-phase"\n                                            >\n                                                <sw-icon name="regular-check-circle" size="16px" />\n                                                {{ $tc(\'sw-extension-store.buy-modal.rent.freeTrial\') }}\n                                            </p>\n                                        {% endblock %}\n\n                                        {% block sw_extension_buy_modal_variant_selection_extension_disclaimer %}\n                                            <p\n                                                v-if="isVariantOfTypeRent(selectedVariant)"\n                                                class="sw-extension-buy-modal__extension-summary-disclaimer"\n                                            >\n                                                {{ $tc(\'sw-extension-store.buy-modal.rent.disclaimer\') }}\n                                            </p>\n                                        {% endblock %}\n                                    {% endblock %}\n                                </div>\n                            {% endblock %}\n\n                            {% block sw_extension_buy_modal_variant_selection_variant_list %}\n                                <ul>\n                                    {% block sw_extension_buy_modal_variant_selection_variant_list_item %}\n                                        <li\n                                            v-for="variant in recommendedVariants"\n                                            :key="variant.id"\n                                            class="sw-extension-buy-modal__variants-card"\n                                            :class="variantCardClass(variant)"\n                                            @click="onChangeVariantSelection(variant)"\n                                        >\n\n                                            {% block sw_extension_buy_modal_variant_selection_variant_list_item_radio_button %}\n                                                <div class="sw-extension-buy-modal__variants-card-input sw-field--radio">\n                                                    <div class="sw-field__radio-input">\n                                                        <input\n                                                            type="radio"\n                                                            name="variant-selection"\n                                                            :id="`sw-extension-buy-modal__variant-${variant.type}`"\n                                                            :value="variant.id"\n                                                            :checked="variant.id === selectedVariantId"\n                                                            :disabled="isLoading || recommendedVariants.length <= 1"/>\n                                                        <div class="sw-field__radio-state"></div>\n                                                    </div>\n                                                </div>\n                                            {% endblock %}\n\n                                            {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label %}\n                                                {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_description %}\n                                                    <label\n                                                        :for="`sw-extension-buy-modal__variant-${variant.type}`"\n                                                        class="sw-extension-buy-modal__variant-description"\n                                                    >\n                                                        {{ variant.label || variant.type }}\n                                                    </label>\n                                                {% endblock %}\n\n                                                {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_rent %}\n                                                    <div\n                                                        v-if="isVariantOfTypeRent(variant)"\n                                                        class="sw-extension-buy-modal__rent"\n                                                        :class="getVariantClasses(variant)"\n                                                    >\n\n                                                        {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_rent_prices %}\n                                                            <div>\n                                                                <i18n-t :keypath="getVariantPriceSnippet(variant)" tag="span">\n                                                                    <template #price>\n                                                                        <strong>{{ getVariantPrice(variant) }}*</strong>\n                                                                    </template>\n                                                                </i18n-t>\n                                                            </div>\n                                                        {% endblock %}\n\n                                                        {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_rent_discount_information %}\n                                                            <div v-if="hasActiveDiscount(variant)">\n                                                                <i18n-t :keypath="getVariantDiscountInformationSnippet(variant)" tag="span">\n                                                                    <template #months>\n                                                                        {{ variant.discountCampaign.discountAppliesForMonths }}\n                                                                    </template>\n                                                                    <template #price>\n                                                                        {{ renderPrice(variant.netPrice) }}*\n                                                                    </template>\n                                                                </i18n-t>\n                                                            </div>\n                                                        {% endblock %}\n\n                                                        {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_rent_additional_information %}\n                                                            <div>\n                                                                <span v-if="isRentDurationYearly(variant)">\n                                                                    <i18n-t keypath="sw-extension-store.general.labelPricePerYear" tag="span">\n                                                                        <template #price>\n                                                                            {{ renderPrice(variant.netPrice) }}*\n                                                                        </template>\n                                                                    </i18n-t>\n                                                                    -\n                                                                </span>\n                                                                <span>\n                                                                    {{ $tc(getVariantCancellationInformationSnippet(variant)) }}\n                                                                </span>\n                                                            </div>\n                                                        {% endblock %}\n                                                    </div>\n\n                                                    <div\n                                                        v-if="isVariantOfTypeRent(variant) && getVariantBadgeSavings(variant) > 0"\n                                                        class="sw-extension-buy-modal__variants-card-badge"\n                                                        :class="getVariantBadgeClasses(variant)"\n                                                    >\n                                                        {{ $tc(\'sw-extension-store.general.labelSavings\', { percentage: getVariantBadgeSavings(variant) }) }}\n                                                    </div>\n                                                {% endblock %}\n\n                                                {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_buy %}\n                                                    <div\n                                                        v-if="isVariantOfTypeBuy(variant)"\n                                                        class="sw-extension-buy-modal__buy"\n                                                        :class="getDiscountClasses(variant)"\n                                                    >\n\n                                                        {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_buy_prices %}\n                                                            <span\n                                                                v-if="hasActiveDiscount(variant)"\n                                                                class="sw-extension-buy-modal__list-price"\n                                                            >\n                                                                {{ renderPrice(variant.netPrice) }}\n                                                            </span>\n                                                            <span class="sw-extension-buy-modal__discounted-price">{{ renderBuyPrice(variant) }}</span>\n                                                        {% endblock %}\n                                                    </div>\n                                                {% endblock %}\n\n                                                {% block sw_extension_buy_modal_variant_selection_variant_list_item_variant_label_fallback %}\n                                                    <div\n                                                        v-if="!isVariantOfTypeBuy(variant) && !isVariantOfTypeRent(variant)"\n                                                        :class="`sw-extension-buy-modal__${variant.type}`"\n                                                    >\n                                                        <span class="sw-extension-buy-modal__display-default-price">\n                                                            {{ renderPrice(variant.netPrice) }}\n                                                        </span>\n                                                    </div>\n                                                {% endblock %}\n                                            {% endblock %}\n                                        </li>\n                                    {% endblock %}\n                                </ul>\n                            {% endblock %}\n                        {% endblock %}\n                    </div>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_summary %}\n                    <div class="sw-extension-buy-modal__variant-summary">\n                        {% block sw_extension_buy_modal_summary_content %}\n                            {% block sw_extension_buy_modal_summary_price %}\n                                <p class="sw-extension-buy-modal__variant-summary-price">\n                                    {% block sw_extension_buy_modal_summary_price_content %}\n                                        {% block sw_extension_buy_modal_summary_label_price %}\n                                            <span>\n                                                {{ $tc(\'sw-extension-store.component.sw-extension-buy-modal.variantSummary.labelPrice\') }}\n                                            </span>\n                                        {% endblock %}\n\n                                        {% block sw_extension_buy_modal_summary_actual_price %}\n                                            <span\n                                                v-if="!isLoading"\n                                                class="sw-extension-buy-modal__variant-summary-actual-price"\n                                            >\n                                                <i18n-t :keypath="actualPriceSnippet" tag="span">\n                                                    <template #price>\n                                                        {{ actualPrice }}*\n                                                    </template>\n                                                </i18n-t>\n                                            </span>\n                                        {% endblock %}\n                                    {% endblock %}\n                                </p>\n\n                                <template v-if="isVariantOfTypeRent(selectedVariant) && firstMonthFree">\n                                    <i18n-t\n                                        v-if="hasActiveDiscount(selectedVariant)"\n                                        keypath="sw-extension-store.buy-modal.rent.followingDiscount"\n                                        class="sw-extension-buy-modal__variant-summary-price-subline"\n                                        tag="p"\n                                    >\n                                        <template #price>\n                                            {{ renderPrice(selectedVariant.discountCampaign.discountedPricePerMonth) }}*\n                                        </template>\n                                        <template #months>\n                                            {{ !isRentDurationMonthly(selectedVariant) ? selectedVariant.duration : selectedVariant.discountCampaign.discountAppliesForMonths }}\n                                        </template>\n                                    </i18n-t>\n\n                                    <i18n-t\n                                        :keypath="finalPriceSnippet"\n                                        class="sw-extension-buy-modal__variant-summary-price-subline is--final-price"\n                                        tag="p"\n                                    >\n                                        <template #price>\n                                            {{ renderPrice(selectedVariant.netPrice) }}*\n                                        </template>\n                                    </i18n-t>\n                                </template>\n                            {% endblock %}\n\n                            {% block sw_extension_buy_modal_summary_renewal_date %}\n                                <p\n                                    class="sw-extension-buy-modal__variant-summary-price-subline"\n                                    :class="renewalDateClasses"\n                                >\n                                    {{ $tc(\'sw-extension-store.component.sw-extension-buy-modal.variantSummary.renewal\', { renewalDate: dateFilter(renewalDate) }, 0) }}\n                                </p>\n                            {% endblock %}\n                        {% endblock %}\n                    </div>\n                {% endblock %}\n\n                {% block sw_extension_payment_selection %}\n                    <sw-single-select\n                        v-if="showPaymentSelection"\n                        :options="paymentMeans"\n                        :placeholder="$tc(\'sw-extension-store.buy-modal.paymentSelectionPlaceholder\')"\n                        valueProperty="id"\n                        v-model:value="selectedPaymentMean"\n                    >\n                    </sw-single-select>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_accept_toc %}\n                    <sw-gtc-checkbox\n                        v-model:value="tocAccepted"\n                        class="sw-extension-buy-modal__checkbox"\n                    />\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_accept_extension_permissions %}\n                    <sw-checkbox-field\n                        v-if="extensionHasPermissions"\n                        class="sw-extension-buy-modal__checkbox sw-extension-buy-modal__checkbox-permissions"\n                        :class="`sw-extension-buy-modal__checkbox-permissions--${extension.name}`"\n                        v-model:value="permissionsAccepted"\n                    >\n                        <template #label>\n                                <span v-if="legalText">\n                                    {{ $tc(\'sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.introText\') }}\n                                    <a\n                                        href="#"\n                                        class="link permissions-modal-trigger"\n                                        @click.prevent="openPermissionsModal"\n                                    >\n                                        {{ $tc(\'sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.buttonPermissions\') }}\n                                    </a>\n                                    {{ $tc(\'sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.middleText\') }}\n                                    <a\n                                        href="#"\n                                        class="link legal-text-modal-trigger"\n                                        @click.prevent="openLegalTextModal"\n                                    >\n                                        {{ $tc(\'sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.buttonAppProvider\') }}\n                                    </a>\n                                    {{ $tc(\'sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.endText\') }}\n                                </span>\n\n                            <span v-else>\n                                    {{ $tc(\'sw-extension-store.component.sw-extension-buy-modal.labelAcceptPermissions\') }}\n                                    <a\n                                        href="#"\n                                        class="link permissions-modal-trigger"\n                                        @click="openPermissionsModal"\n                                    >\n                                        {{ $tc(\'sw-extension-store.detail.labelButtonShowPermissions\') }}\n                                    </a>\n                                </span>\n                        </template>\n                    </sw-checkbox-field>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_accept_extension_app_provider %}\n                    <sw-checkbox-field\n                        v-if="!extensionHasPermissions && legalText"\n                        v-model:value="legalTextAccepted"\n                        class="sw-extension-buy-modal__checkbox sw-extension-buy-modal__checkbox-app-provider"\n                        :class="`sw-extension-buy-modal__checkbox-app-provider--${extension.name}`"\n                    >\n                        <template #label>\n                            {{ $tc(\'sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.appProviderStartText\') }}\n                            <a\n                                @click.prevent="openLegalTextModal"\n                                class="link legal-text-modal-trigger"\n                                href="#"\n                            >\n                                {{ $tc(\'sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.buttonAppProvider\') }}\n                            </a>\n                            {{ $tc(\'sw-extension-store.buy-modal.checkboxes.permissionsAndAppProvider.endText\') }}\n                        </template>\n                    </sw-checkbox-field>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_accept_extension_privacy_policy_extensions %}\n                    <sw-checkbox-field\n                        v-if="extension.privacyPolicyExtension"\n                        v-model:value="privacyExtensionsAccepted"\n                        class="sw-extension-buy-modal__checkbox-privacy-policy"\n                        :class="`sw-extension-buy-modal__checkbox-privacy-policy--${extension.name}`"\n                    >\n                        <template #label>\n                                <span class="is--required">\n                                    {{ $tc(\'sw-extension-store.component.sw-extension-buy-modal.labelAcceptPrivacyExtensions\') }}\n                                </span>\n                            <a\n                                href="#"\n                                class="link privacy-policy-modal-trigger"\n                                @click.prevent="openPrivacyModal"\n                            >\n                                {{ $tc(\'sw-extension-store.component.sw-extension-buy-modal.buttonShowPrivacyExtensions\') }}\n                            </a>\n                        </template>\n                    </sw-checkbox-field>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_alert_can_not_buy %}\n                    <sw-alert v-if="!userCanBuyFromStore" variant="info">\n                        {% block sw_extension_buy_modal_alert_can_not_buy_content %}\n                            {{ $tc(\'sw-extension-store.component.sw-extension-buy-modal.alertCanNotBuy.text\') }}\n                        {% endblock %}\n                    </sw-alert>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_alert_payment_means_required %}\n                    <sw-alert v-if="showPaymentWarning" variant="warning">\n                        {% block sw_extension_buy_modal_alert_payment_means_required_content %}\n                            {{ $tc(\'sw-extension-store.buy-modal.warnings.paymentMeansRequiredText\') }}\n                            <sw-external-link\n                                :href="cart && cart.payment && cart.payment.registrationUrl"\n                                class="sw-extension-buy-modal__external-link"\n                            >\n                                {{ $tc(\'sw-extension-store.buy-modal.warnings.paymentMeansRequiredLinkText\') }}\n                                <sw-icon name="regular-long-arrow-right"></sw-icon>\n                            </sw-external-link>\n                        {% endblock %}\n                    </sw-alert>\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_plus_vat %}\n                    <p\n                        class="sw-extension-buy-modal__plus-vat"\n                        :class="vatIncludedClasses"\n                    >\n                        {{ $tc(\'sw-extension-store.buy-modal.plusVat\') }}\n                    </p>\n                {% endblock %}\n\n                {% block sw_extension_payment_general_text_block %}\n                    <p\n                        v-if="paymentText"\n                        class="sw-extension-buy-modal__general-text-block"\n                        v-html="paymentText"\n                    />\n                {% endblock %}\n\n                {% block sw_extension_buy_modal_button_purchase %}\n                    <sw-button\n                        class="sw-extension-buy-modal__purchase-button"\n                        size="default"\n                        variant="primary"\n                        block\n                        :disabled="!canPurchaseExtension"\n                        @click="purchaseExtension"\n                    >\n                        {{ purchaseButtonLabel }}\n                    </sw-button>\n                {% endblock %}\n            {% endblock %}\n\n            {% block sw_extension_buy_modal_permissions_modal %}\n                <sw-extension-permissions-modal\n                    v-if="showPermissionsModal"\n                    :extensionLabel="extension.label"\n                    :domains="extension.domains"\n                    :permissions="extension.permissions"\n                    @modal-close="closePermissionsModal">\n                </sw-extension-permissions-modal>\n            {% endblock %}\n\n            {% block sw_extension_buy_modal_privacy_extensions_modal %}\n                <sw-extension-privacy-policy-extensions-modal\n                    v-if="showPrivacyModal"\n                    :extensionName="extension.label"\n                    :privacyPolicyExtension="extension.privacyPolicyExtension"\n                    @modal-close="closePrivacyModal">\n                </sw-extension-privacy-policy-extensions-modal>\n            {% endblock %}\n\n            {% block sw_extension_buy_modal_legal_text_modal %}\n                <sw-modal\n                    v-if="showLegalTextModal"\n                    @modal-close="closeLegalTextModal"\n                    class="sw-extension-buy-modal__legal-text-modal"\n                    :title="$tc(\'sw-extension-store.buy-modal.legalTextModal.title\')">\n                    <div v-html="legalText"></div>\n\n                    <template #modal-footer>\n                        <sw-button\n                            variant="primary"\n                            size="small"\n                            @click="closeLegalTextModal">\n                            {{ $tc(\'global.default.close\') }}\n                        </sw-button>\n                    </template>\n                </sw-modal>\n            {% endblock %}\n        </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n',inject:["shopwareExtensionService","extensionStoreService","extensionStoreLicensesService"],emits:["modal-close"],mixins:["sw-extension-error"],props:{extension:{type:Object,required:!0}},data(){return{tocAccepted:!1,selectedVariantId:null,isLoading:!1,permissionsAccepted:!1,legalTextAccepted:!1,showPermissionsModal:!1,showLegalTextModal:!1,privacyExtensionsAccepted:!1,showPrivacyModal:!1,checkoutStep:null,checkoutError:null,cart:null,paymentMeans:[]}},computed:{actualPrice(){let e=this.cart&&this.cart.positions&&this.cart.positions[0],n=e&&e.netPrice;return n&&e&&e.firstMonthFree?s.format.currency(0,"EUR"):n?s.format.currency(n,"EUR",2):s.format.currency(this.extensionStoreService.getPriceFromVariant(this.selectedVariant),"EUR")},actualPriceSnippet(){if(this.extensionStoreService.isVariantOfTypeFree(this.selectedVariant))return"sw-extension-store.general.labelFree";if(this.extensionStoreService.isVariantOfTypeBuy(this.selectedVariant))return"sw-extension-store.general.labelPriceOneTime";let e=this.cart&&this.cart.positions&&this.cart.positions[0];return e&&e.netPrice&&e&&e.firstMonthFree?"sw-extension-store.general.labelPriceFirstMonth":this.isRentDurationYearly(this.selectedVariant)?"sw-extension-store.general.labelPricePerYear":"sw-extension-store.general.labelPricePerMonth"},finalPriceSnippet(){return this.isRentDurationYearly(this.selectedVariant)?"sw-extension-store.buy-modal.rent.yearly.finalPrice":"sw-extension-store.buy-modal.rent.monthly.finalPrice"},recommendedVariants(){return this.extensionStoreService.orderVariantsByRentDuration(this.extension.variants)},selectedVariant(){return this.extension.variants.find(e=>e.id===this.selectedVariantId)},dateFilter(){return s.format.date},purchaseButtonLabel(){return this.isVariantOfTypeFree(this.selectedVariant)?this.$t("sw-extension-store.component.sw-extension-buy-modal.purchaseButtonsLabels.free"):this.isVariantOfTypeRent(this.selectedVariant)?this.$t("sw-extension-store.component.sw-extension-buy-modal.purchaseButtonsLabels.rent"):this.$t("sw-extension-store.component.sw-extension-buy-modal.purchaseButtonsLabels.buy")},vatIncludedClasses(){return{"is--hidden":this.isVariantOfTypeFree(this.selectedVariant)}},renewalDate(){let e=new Date;return this.isRentDurationMonthly(this.selectedVariant)?e.setMonth(e.getMonth()+1):e.setMonth(e.getMonth()+12),e},renewalDateClasses(){return{"is--hidden":!1===this.isVariantOfTypeRent(this.selectedVariant)}},extensionHasPermissions(){return!!Object.keys(this.extension.permissions).length},canPurchaseExtension(){return this.tocAccepted&&this.permissionsAccepted&&this.legalTextAccepted&&this.privacyExtensionsAccepted&&this.userCanBuyFromStore&&!this.showPaymentWarning},userCanBuyFromStore(){return this.tocAccepted,null!==Shopware.State.get("shopwareExtensions").userInfo},showPaymentWarning(){return(this.paymentMeans||[]).length<=0&&this.cart&&this.cart.payment&&this.cart.payment.paymentMeanRequired},checkoutSteps(){return Object.freeze({CHECKOUT:null,SUCCESS:"checkout-success",FAILED:"checkout-failed"})},showPaymentSelection(){return(this.paymentMeans||[]).length>0&&this.cart&&this.cart.payment&&this.cart.payment.paymentMeanRequired},paymentText(){return this.cart&&this.cart.payment&&this.cart.payment.paymentText?this.$sanitize(this.cart.payment.paymentText,{ALLOWED_TAGS:["a","b","i","u","br","strong","p","br"],ALLOWED_ATTR:["href","target","rel"]}):null},legalText(){return this.cart&&this.cart.legalText?this.$sanitize(this.cart.legalText,{ALLOWED_TAGS:["a","b","i","u","br","strong","p","br"],ALLOWED_ATTR:["href","target","rel"]}):null},selectedPaymentMean:{get(){return this.cart&&this.cart.payment&&this.cart.payment.paymentMean&&this.cart.payment.paymentMean.id},set(e){this.cart&&this.cart.payment&&this.cart.payment.paymentMean&&(this.cart.payment.paymentMean.id=e),this.cart.payment.paymentMean={id:e}}},checkoutErrorDocumentationLink(){return s.get(this.checkoutError,"meta.documentationLink",null)},firstMonthFree(){return this.cart&&this.cart.positions[0]&&!0===this.cart.positions[0].firstMonthFree}},async created(){let e=this.recommendedVariants.length>0?this.recommendedVariants[0].id:null;this.setSelectedVariantId(e),this.permissionsAccepted=!this.extensionHasPermissions,this.privacyExtensionsAccepted=!this.extension.privacyPolicyExtension,await this.fetchPlan(),this.legalTextAccepted=!this.legalText},watch:{selectedVariantId(){this.getCart()},userCanBuyFromStore(e){e&&this.getCart()},permissionsAccepted(e){this.legalTextAccepted=e}},methods:{emitClose(){this.isLoading||this.$emit("modal-close")},getDiscountClasses(e){return{"is--discounted":this.hasActiveDiscount(e)}},getVariantPrice(e){return this.extensionStoreService.getCalculatedPrice(e)},getVariantPriceSnippet(e){return this.extensionStoreService.getPriceSnippetForVariant(e)},getVariantDiscountInformationSnippet(e){return this.isRentDurationYearly(e)?"sw-extension-store.buy-modal.rent.yearly.discountInformation":"sw-extension-store.buy-modal.rent.monthly.discountInformation"},getVariantCancellationInformationSnippet(e){return this.isRentDurationYearly(e)?"sw-extension-store.buy-modal.rent.yearly.cancellationInformation":"sw-extension-store.buy-modal.rent.monthly.cancellationInformation"},getVariantClasses(e){return{"is--monthly":this.isRentDurationMonthly(e),"is--yearly":this.isRentDurationYearly(e)}},getVariantBadgeClasses(e){return{"sw-extension-buy-modal__variants-card-badge-discounted":this.hasActiveDiscount(e),"is--monthly":this.isRentDurationMonthly(e),"is--yearly":this.isRentDurationYearly(e)}},getVariantBadgeSavings(e){let n=this.extension.variants.find(e=>this.extensionStoreService.isRentDurationMonthly(e));if(!n)return 0;let t=n.netPrice,s=e.netPrice,i=e.duration,a=s!==t*i,o=this.hasActiveDiscount(e),r=0;return a&&!1===o?r=100*(1-s/(t*i)):!1===a&&o?r=100*(1-e.discountCampaign.discountedPrice/e.netPrice):a&&o&&(r=100*(1-e.discountCampaign.discountedPrice/(t*i))-100*(1-s/(t*i))),r.toFixed(2).replace(/\.00$/,"")},hasActiveDiscount(e){return this.extensionStoreService.isVariantDiscounted(e)},isRentDurationMonthly(e){return this.extensionStoreService.isRentDurationMonthly(e)},isRentDurationYearly(e){return this.extensionStoreService.isRentDurationYearly(e)},isVariantOfTypeFree(e){return this.extensionStoreService.isVariantOfTypeFree(e)},isVariantOfTypeBuy(e){return this.extensionStoreService.isVariantOfTypeBuy(e)},isVariantOfTypeRent(e){return this.extensionStoreService.isVariantOfTypeRent(e)},setSelectedVariantId(e){this.isLoading||(this.selectedVariantId=e)},variantCardClass(e){return{"is--selected":e.id===this.selectedVariantId}},onChangeVariantSelection(e){this.setSelectedVariantId(e.id)},async purchaseExtension(){this.isLoading=!0;let e=null;try{await this.orderCart(),await this.shopwareExtensionService.updateExtensionData(),e=this.checkoutSteps.SUCCESS}catch(n){this.handleErrors(n),e=this.checkoutSteps.FAILED,s.get(n,"response.data.errors[0]",null)&&(this.checkoutError=n.response.data.errors[0])}finally{await this.shopwareExtensionService.updateExtensionData(),this.checkoutStep=e,this.isLoading=!1}},async orderCart(){await this.extensionStoreLicensesService.orderCart(this.cart)},async getCart(){if(this.userCanBuyFromStore){this.isLoading=!0;try{let e=await this.extensionStoreLicensesService.newCart(this.extension.id,this.selectedVariantId);this.cart=e.data}catch(e){this.handleErrors(e),this.isLoading=!1,this.emitClose()}finally{this.isLoading=!1}}},renderPrice(e){return s.format.currency(e,"EUR")},renderBuyPrice(e){return this.hasActiveDiscount(e)?this.renderPrice(e.discountCampaign.discountedPrice):this.renderPrice(e.netPrice)},handleErrors(e){this.showExtensionErrors(e)},openPermissionsModal(){this.showPermissionsModal=!0},closePermissionsModal(){this.showPermissionsModal=!1},openLegalTextModal(){this.showLegalTextModal=!0},closeLegalTextModal(){this.showLegalTextModal=!1},async fetchPlan(){this.isLoading=!0,await this.shopwareExtensionService.checkLogin(),await this.getPaymentMeans(),this.isLoading=!1},async getPaymentMeans(){this.extensionStoreLicensesService.getPaymentMeans().then(e=>{this.paymentMeans=e.data}).catch(e=>{let n=e.response&&e.response.data&&e.response.data.errors||[];if(!Array.isArray(n)){Shopware.Utils.debug.warn("Payment loading error",e);return}n.forEach(e=>{this.createNotificationError({system:!0,autoClose:!1,growl:!0,title:e.title,message:e.detail})})})},openPrivacyModal(){this.showPrivacyModal=!0},closePrivacyModal(){this.showPrivacyModal=!1}}}},7239:function(e,n,t){var s=t(5548);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),t(5346).Z("56237c8a",s,!0,{})},5346:function(e,n,t){"use strict";function s(e,n){for(var t=[],s={},i=0;i<n.length;i++){var a=n[i],o=a[0],r={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};s[o]?s[o].parts.push(r):t.push(s[o]={id:o,parts:[r]})}return t}t.d(n,{Z:function(){return _}});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=i&&(document.head||document.getElementsByTagName("head")[0]),r=null,l=0,c=!1,d=function(){},u=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function _(e,n,t,i){c=t,u=i||{};var o=s(e,n);return h(o),function(n){for(var t=[],i=0;i<o.length;i++){var r=a[o[i].id];r.refs--,t.push(r)}n?h(o=s(e,n)):o=[];for(var i=0;i<t.length;i++){var r=t[i];if(0===r.refs){for(var l=0;l<r.parts.length;l++)r.parts[l]();delete a[r.id]}}}}function h(e){for(var n=0;n<e.length;n++){var t=e[n],s=a[t.id];if(s){s.refs++;for(var i=0;i<s.parts.length;i++)s.parts[i](t.parts[i]);for(;i<t.parts.length;i++)s.parts.push(b(t.parts[i]));s.parts.length>t.parts.length&&(s.parts.length=t.parts.length)}else{for(var o=[],i=0;i<t.parts.length;i++)o.push(b(t.parts[i]));a[t.id]={id:t.id,refs:1,parts:o}}}}function y(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function b(e){var n,t,s=document.querySelector("style["+m+'~="'+e.id+'"]');if(s){if(c)return d;s.parentNode.removeChild(s)}if(p){var i=l++;n=v.bind(null,s=r||(r=y()),i,!1),t=v.bind(null,s,i,!0)}else n=w.bind(null,s=y()),t=function(){s.parentNode.removeChild(s)};return n(e),function(s){s?(s.css!==e.css||s.media!==e.media||s.sourceMap!==e.sourceMap)&&n(e=s):t()}}var x=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}();function v(e,n,t,s){var i=t?"":s.css;if(e.styleSheet)e.styleSheet.cssText=x(n,i);else{var a=document.createTextNode(i),o=e.childNodes;o[n]&&e.removeChild(o[n]),o.length?e.insertBefore(a,o[n]):e.appendChild(a)}}function w(e,n){var t=n.css,s=n.media,i=n.sourceMap;if(s&&e.setAttribute("media",s),u.ssrId&&e.setAttribute(m,n.id),i&&(t+="\n/*# sourceURL="+i.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}}]);