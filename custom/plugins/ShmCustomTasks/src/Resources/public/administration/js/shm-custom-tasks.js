(function(){"use strict";var e={};e.p="bundles/shmcustomtasks/",window?.__sw__?.assetPath&&(e.p=window.__sw__.assetPath+"/bundles/shmcustomtasks/"),function(){let e=Object.freeze({CHANGE_SHIPPING:"action.change.shipping",CREATE_RETURN_LABEL:"action.create.return-label"}),n="order",{Component:t}=Shopware;t.override("sw-flow-sequence-action",{computed:{modalName(){switch(this.selectedAction){case e.CHANGE_SHIPPING:return"sw-flow-change-shipping-modal";case e.CREATE_RETURN_LABEL:return"sw-flow-create-return-label-modal";default:return this.$super("modalName")}}},methods:{getActionTitle(t){switch(t){case e.CHANGE_SHIPPING:return{value:t,icon:"regular-tag",label:this.$tc("change-shipping-action.title"),group:n};case e.CREATE_RETURN_LABEL:return{value:t,icon:"regular-printer",label:this.$tc("create-return-label-action.titleCreateLabel"),group:n};default:return this.$super("getActionTitle",t)}}}});let{Component:i}=Shopware,{EntityCollection:o,Context:r}=Shopware.Data;i.register("sw-flow-change-shipping-modal",{template:'{% block change_shipping_label_action_modal %}\n    <sw-modal\n            class="create-tag-action-modal"\n            :title="$tc(\'change-shipping-action.title\')"\n            @modal-close="onClose"\n    >\n        <sw-entity-single-select\n                :value="shippingMethodId"\n                entity="shipping_method"\n                required\n                :label="$tc(\'change-shipping-action.shipping\')"\n                @change="selectedShippingMethod"\n        >\n        </sw-entity-single-select>\n\n        <sw-single-select\n                :options="conditionOptions"\n                valueProperty="key"\n                labelProperty="label"\n                :placeholder="$tc(\'change-shipping-action.conditions.placeholder\')"\n                :label="$tc(\'change-shipping-action.conditions.title\')"\n                required\n                :value="selectedCondition"\n                @change="onConditionChange"\n        ></sw-single-select>\n\n        <sw-number-field\n                :label="$tc(\'change-shipping-action.weightAmount.title\')"\n                :value="amount"\n                :min="0"\n                :step="0.01"\n                :max="1000000"\n                :placeholder="$tc(\'change-shipping-action.weightAmount.placeholder\')"\n                required\n                @change="onChangedWeightAmount"\n        ></sw-number-field>\n\n        <template #modal-footer>\n            <sw-button\n                    size="small"\n                    @click="onClose"\n            >\n                {{ $tc(\'global.default.cancel\') }}\n            </sw-button>\n\n            <sw-button\n                    variant="primary"\n                    size="small"\n                    @click="onAddAction"\n            >\n                {{ $tc(\'change-shipping-action.buttonSaveAction\') }}\n            </sw-button>\n        </template>\n    </sw-modal>\n{% endblock %}\n\n\n',inject:["repositoryFactory"],props:{sequence:{type:Object,required:!0}},data(){return{shippingMethod:[],amount:1,selectedCondition:"",actionIsActive:!1,conditions:[{key:"=",label:"change-shipping-action.conditions.equals"},{key:">",label:"change-shipping-action.conditions.greaterThan"},{key:">=",label:"change-shipping-action.conditions.greaterThanOrEquals"},{key:"<",label:"change-shipping-action.conditions.lessThan"},{key:"<=",label:"change-shipping-action.conditions.lessThanOrEquals"}]}},computed:{shippingRepository(){return this.repositoryFactory.create("shipping_method")},shippingMethodId(){return this.shippingMethod.length?this.shippingMethod[0].id:null},weightAmount(){return this.amount},conditionOptions(){return this.conditions}},watch:{"sequence.config":{handler(e){e?.shippingMethod?.length>0?e.shippingMethod&&(this.shippingMethod=e.shippingMethod):this.shippingMethod=this.createShippingMethodCollection(),e?.isActive&&(this.actionIsActive=e.isActive)},immediate:!0}},methods:{createShippingMethodCollection(){return new o(this.shippingRepository.route,this.shippingRepository.entityName,r.api)},selectedShippingMethod(e,n){let t=this.createShippingMethodCollection();n&&t.add(n),this.shippingMethod=t},onChangeAction(e){this.actionIsActive=e},onConditionChange(e){this.selectedCondition=e},onChangedWeightAmount(e){this.amount=e},onAddAction(){let e={...this.sequence,config:{...this.sequence.config,shippingMethod:this.shippingMethod,condition:this.selectedCondition,weightAmount:this.amount}};this.$nextTick(()=>{this.$emit("process-finish",e)})},onClose(){this.$emit("modal-close")}}});let{Component:a}=Shopware,{EntityCollection:s,Context:c}=Shopware.Data;a.register("sw-flow-create-return-label-modal",{template:'{% block create_return_label_action_modal %}\r\n    <sw-modal\r\n            class="create-return-label-action-modal"\r\n            :title="$tc(\'create-return-label-action.titleCreateLabel\')"\r\n            @modal-close="onClose"\r\n    >\r\n        {% block create_return_label_action_modal_content %}\r\n            <sw-switch-field\r\n                    :value="actionIsActive"\r\n                    @change="onChangeAction"\r\n                    :label="$tc(\'create-return-label-action.isActive\')"\r\n            >\r\n            </sw-switch-field>\r\n\r\n            <sw-entity-single-select\r\n                    :value="shippingCarrierId"\r\n                    entity="pickware_shipping_carrier"\r\n                    required\r\n                    :label="$tc(\'create-return-label-action.carrier\')"\r\n                    @change="selectedShippingCarrierMethod"\r\n            >\r\n            </sw-entity-single-select>\r\n\r\n        {% endblock %}\r\n\r\n        {% block create_return_label_action_modal_footer %}\r\n            <template #modal-footer>\r\n\r\n                {% block create_tag_action_modal_footer_cancel_button %}\r\n                    <sw-button\r\n                            class="create-return-label-action-modal__cancel-button"\r\n                            size="small"\r\n                            @click="onClose"\r\n                    >\r\n                        {{ $tc(\'global.default.cancel\') }}\r\n                    </sw-button>\r\n                {% endblock %}\r\n\r\n                {% block create_return_label_action_modal_footer_save_button %}\r\n                    <sw-button\r\n                            class="create-return-label-action-modal__save-button"\r\n                            variant="primary"\r\n                            size="small"\r\n                            @click="onAddAction"\r\n                    >\r\n                        {{ $tc(\'create-return-label-action.buttonSaveAction\') }}\r\n                    </sw-button>\r\n                {% endblock %}\r\n\r\n            </template>\r\n        {% endblock %}\r\n    </sw-modal>\r\n{% endblock %}\r\n\r\n\r\n',inject:["repositoryFactory"],props:{actionIsActive:{type:Boolean,default:!1,required:!0},sequence:{type:Object,required:!0}},data(){return{shippingCarrierMethod:[],actionIsActive:this.actionIsActive}},computed:{shippingCarrierRepository(){return this.repositoryFactory.create("pickware_shipping_carrier")},shippingCarrierId(){return this.shippingCarrierMethod.length?this.shippingCarrierMethod[0].id:null}},watch:{"sequence.config":{handler(e){e?.shippingCarrierMethod?.length>0?e.shippingCarrierMethod&&(this.shippingCarrierMethod=e.shippingCarrierMethod):this.shippingCarrierMethod=this.createShippingCarrierCollection(),e?.isActive&&(this.actionIsActive=e.isActive)},immediate:!0}},methods:{createShippingCarrierCollection(){return new s(this.shippingCarrierRepository.route,this.shippingCarrierRepository.entityName,c.api)},selectedShippingCarrierMethod(e,n){let t=this.createShippingCarrierCollection();n&&t.add(n),this.shippingCarrierMethod=t},onChangeAction(e){this.actionIsActive=e},onAddAction(){let e=this.actionIsActive,n={...this.sequence,config:{...this.sequence.config,isActive:e,shippingCarrierMethod:this.shippingCarrierMethod}};this.$nextTick(()=>{this.$emit("process-finish",n)})},onClose(){this.$emit("modal-close")}}})}()})();